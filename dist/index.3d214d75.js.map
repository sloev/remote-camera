{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAI,WAAW;AAAK,IAAI,WAAW;AAAK,IAAI,aAAa;AAAM,IAAI,eAAe;AAAmB,IAAI,cAAc;AAAM,OAAO,MAAM,CAAC,aAAa,GAAG;AAAmB;AAE9K,8JAA8J,GAC9J;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,GACA,IAAI,aAAa;AACjB,IAAI,YAAY,OAAO,MAAM,CAAC,MAAM;AACpC,SAAS,OAAO,UAAU;IACxB,UAAU,IAAI,CAAC,IAAI,EAAE;IACrB,IAAI,CAAC,GAAG,GAAG;QACT,MAAM,OAAO,MAAM,CAAC,OAAO,CAAC,WAAW;QACvC,kBAAkB,EAAE;QACpB,mBAAmB,EAAE;QACrB,QAAQ,SAAU,EAAE;YAClB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,YAAa;QAChD;QACA,SAAS,SAAU,EAAE;YACnB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;QAC9B;IACF;IACA,OAAO,MAAM,CAAC,OAAO,CAAC,WAAW,GAAG;AACtC;AACA,OAAO,MAAM,CAAC,MAAM,GAAG;AACvB,OAAO,MAAM,CAAC,OAAO,GAAG,CAAC;AACzB,IAAI,cAAc,0BAA0B,KAAI,gBAAgB,mCAAmC,KAAI,eAAe,mCAAmC;AAEzJ,SAAS;IACP,OAAO,YAAa,CAAA,SAAS,QAAQ,CAAC,OAAO,CAAC,YAAY,IAAI,SAAS,QAAQ,GAAG,WAAU;AAC9F;AACA,SAAS;IACP,OAAO,YAAY,SAAS,IAAI;AAClC;AAEA,wCAAwC;AACxC,IAAI,SAAS,OAAO,MAAM,CAAC,MAAM;AACjC,IAAI,AAAC,CAAA,CAAC,UAAU,CAAC,OAAO,eAAe,AAAD,KAAM,OAAO,cAAc,aAAa;IAC5E,IAAI,WAAW;IACf,IAAI,OAAO;IACX,IAAI,WAAW,cAAc,SAAS,QAAQ,IAAI,YAAY,CAAC;QAAC;QAAa;QAAa;KAAU,CAAC,QAAQ,CAAC,YAAY,QAAQ;IAClI,IAAI;IACJ,IAAI,aACF,KAAK,IAAI,YAAY;SAErB,IAAI;QACF,KAAK,IAAI,UAAU,WAAW,QAAQ,WAAY,CAAA,OAAO,MAAM,OAAO,EAAC,IAAK;IAC9E,EAAE,OAAO,KAAK;QACZ,IAAI,IAAI,OAAO,EACb,QAAQ,KAAK,CAAC,IAAI,OAAO;QAE3B,KAAK,CAAC;IACR;IAGF,wBAAwB;IACxB,IAAI,SAAS,OAAO,YAAY,cAAc,OAAO,WAAW,cAAc,OAAO,SAAS;IAE9F,oDAAoD;IACpD,0DAA0D;IAC1D,IAAI,oBAAoB;IACxB,IAAI;QACD,CAAA,GAAG,IAAG,EAAG;IACZ,EAAE,OAAO,KAAK;QACZ,oBAAoB,IAAI,KAAK,CAAC,QAAQ,CAAC;IACzC;IAEA,aAAa;IACb,GAAG,SAAS,GAAG,eAAgB,MAAM,wBAAwB,GAAzB;QAClC,gBAAgB,CAAC,EAAE,0BAA0B;QAC7C,iBAAiB,EAAE;QACnB,kBAAkB,EAAE;QACpB,IAAI,KAAK,eAAe,MAAK,KAAK,KAAK,CAAC,MAAM,IAAI;QAClD,IAAI,KAAK,IAAI,KAAK,UAAU;YAC1B,uCAAuC;YACvC,IAAI,OAAO,aAAa,aACtB;YAEF,IAAI,SAAS,KAAK,MAAM,CAAC,MAAM,CAAC,CAAA,QAAS,MAAM,OAAO,KAAK;YAE3D,oBAAoB;YACpB,IAAI,UAAU,OAAO,KAAK,CAAC,CAAA;gBACzB,OAAO,MAAM,IAAI,KAAK,SAAS,MAAM,IAAI,KAAK,QAAQ,eAAe,OAAO,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,EAAE,MAAM,YAAY;YACvH;YACA,IAAI,SAAS;gBACX,QAAQ,KAAK;gBAEb,yEAAyE;gBACzE,IAAI,OAAO,WAAW,eAAe,OAAO,gBAAgB,aAC1D,OAAO,aAAa,CAAC,IAAI,YAAY;gBAEvC,MAAM,gBAAgB;gBAEtB,0BAA0B;gBAC1B,IAAI,kBAAkB,CAAC,EAAE,0BAA0B;gBACnD,IAAK,IAAI,IAAI,GAAG,IAAI,gBAAgB,MAAM,EAAE,IAAK;oBAC/C,IAAI,KAAK,eAAe,CAAC,EAAE,CAAC,EAAE;oBAC9B,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE;wBACxB,WAAW,eAAe,CAAC,EAAE,CAAC,EAAE,EAAE;wBAClC,eAAe,CAAC,GAAG,GAAG;oBACxB;gBACF;gBAEA,8FAA8F;gBAC9F,kBAAkB,CAAC;gBACnB,IAAK,IAAI,IAAI,GAAG,IAAI,eAAe,MAAM,EAAE,IAAK;oBAC9C,IAAI,KAAK,cAAc,CAAC,EAAE,CAAC,EAAE;oBAC7B,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE;wBACxB,UAAU,cAAc,CAAC,EAAE,CAAC,EAAE,EAAE;wBAChC,eAAe,CAAC,GAAG,GAAG;oBACxB;gBACF;YACF,OAAO;QACT;QACA,IAAI,KAAK,IAAI,KAAK,SAAS;YACzB,+BAA+B;YAC/B,KAAK,IAAI,kBAAkB,KAAK,WAAW,CAAC,IAAI,CAAE;gBAChD,IAAI,QAAQ,eAAe,SAAS,GAAG,eAAe,SAAS,GAAG,eAAe,KAAK;gBACtF,QAAQ,KAAK,CAAC,4BAAkB,eAAe,OAAO,GAAG,OAAO,QAAQ,SAAS,eAAe,KAAK,CAAC,IAAI,CAAC;YAC7G;YACA,IAAI,OAAO,aAAa,aAAa;gBACnC,gCAAgC;gBAChC;gBACA,IAAI,UAAU,mBAAmB,KAAK,WAAW,CAAC,IAAI;gBACtD,aAAa;gBACb,SAAS,IAAI,CAAC,WAAW,CAAC;YAC5B;QACF;IACF;IACA,IAAI,cAAc,WAAW;QAC3B,GAAG,OAAO,GAAG,SAAU,CAAC;YACtB,IAAI,EAAE,OAAO,EACX,QAAQ,KAAK,CAAC,EAAE,OAAO;QAE3B;QACA,GAAG,OAAO,GAAG;YACX,QAAQ,IAAI,CAAC;QACf;IACF;AACF;AACA,SAAS;IACP,IAAI,UAAU,SAAS,cAAc,CAAC;IACtC,IAAI,SAAS;QACX,QAAQ,MAAM;QACd,QAAQ,GAAG,CAAC;IACd;AACF;AACA,SAAS,mBAAmB,WAAW;IACrC,IAAI,UAAU,SAAS,aAAa,CAAC;IACrC,QAAQ,EAAE,GAAG;IACb,IAAI,YAAY;IAChB,KAAK,IAAI,cAAc,YAAa;QAClC,IAAI,QAAQ,WAAW,MAAM,CAAC,MAAM,GAAG,WAAW,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG;YAClE,OAAO,CAAC,EAAE,EAAE;sCACoB,EAAE,mBAAmB,MAAM,QAAQ,EAAE,2FAA2F,EAAE,MAAM,QAAQ,CAAC;AACvL,EAAE,MAAM,IAAI,CAAC,CAAC;QACV,GAAG,MAAM,WAAW,KAAK;QACzB,aAAa,CAAC;;;oBAGL,EAAE,WAAW,OAAO,CAAC;;aAErB,EAAE,MAAM;;UAEX,EAAE,WAAW,KAAK,CAAC,GAAG,CAAC,CAAA,OAAQ,uBAAa,OAAO,UAAU,IAAI,CAAC,IAAI;;QAExE,EAAE,WAAW,aAAa,GAAG,CAAC,8CAAuC,EAAE,WAAW,aAAa,CAAC,sCAAsC,CAAC,GAAG,GAAG;;IAEjJ,CAAC;IACH;IACA,aAAa;IACb,QAAQ,SAAS,GAAG;IACpB,OAAO;AACT;AACA,SAAS;IACP,IAAI,YAAY,UACd,SAAS,MAAM;SACV,IAAI,UAAU,OAAO,OAAO,IAAI,OAAO,OAAO,CAAC,MAAM,EAC1D,OAAO,OAAO,CAAC,MAAM;AAEzB;AACA,SAAS,WAAW,MAAM,EAAE,EAAE,EAAE,mCAAmC;IACjE,IAAI,UAAU,OAAO,OAAO;IAC5B,IAAI,CAAC,SACH,OAAO,EAAE;IAEX,IAAI,UAAU,EAAE;IAChB,IAAI,GAAG,GAAG;IACV,IAAK,KAAK,QACR,IAAK,KAAK,OAAO,CAAC,EAAE,CAAC,EAAE,CAAE;QACvB,MAAM,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;QACtB,IAAI,QAAQ,MAAM,MAAM,OAAO,CAAC,QAAQ,GAAG,CAAC,IAAI,MAAM,GAAG,EAAE,KAAK,IAC9D,QAAQ,IAAI,CAAC;YAAC;YAAQ;SAAE;IAE5B;IAEF,IAAI,OAAO,MAAM,EACf,UAAU,QAAQ,MAAM,CAAC,WAAW,OAAO,MAAM,EAAE;IAErD,OAAO;AACT;AACA,SAAS,WAAW,IAAI;IACtB,IAAI,OAAO,KAAK,YAAY,CAAC;IAC7B,IAAI,CAAC,MACH;IAEF,IAAI,UAAU,KAAK,SAAS;IAC5B,QAAQ,MAAM,GAAG;QACf,IAAI,KAAK,UAAU,KAAK,MACtB,aAAa;QACb,KAAK,UAAU,CAAC,WAAW,CAAC;IAEhC;IACA,QAAQ,YAAY,CAAC,QACrB,aAAa;IACb,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,MAAM,KAAK,GAAG;IACnC,aAAa;IACb,KAAK,UAAU,CAAC,YAAY,CAAC,SAAS,KAAK,WAAW;AACxD;AACA,IAAI,aAAa;AACjB,SAAS;IACP,IAAI,YACF;IAEF,aAAa,WAAW;QACtB,IAAI,QAAQ,SAAS,gBAAgB,CAAC;QACtC,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;YACrC,gCAAgC;YAChC,IAAI,KAAK,WAAW,MAAK,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC;YAC/C,IAAI,WAAW;YACf,IAAI,sBAAsB,aAAa,cAAc,IAAI,OAAO,mDAAmD,WAAW,IAAI,CAAC,QAAQ,KAAK,OAAO,CAAC,WAAW,MAAM;YACzK,IAAI,WAAW,gBAAgB,IAAI,CAAC,SAAS,KAAK,OAAO,CAAC,SAAS,MAAM,MAAM,KAAK,CAAC;YACrF,IAAI,CAAC,UACH,WAAW,KAAK,CAAC,EAAE;QAEvB;QACA,aAAa;IACf,GAAG;AACL;AACA,SAAS,YAAY,KAAK;IACxB,IAAI,MAAM,IAAI,KAAK,MAAM;QACvB,IAAI,OAAO,aAAa,aAAa;YACnC,IAAI,SAAS,SAAS,aAAa,CAAC;YACpC,OAAO,GAAG,GAAG,MAAM,GAAG,GAAG,QAAQ,KAAK,GAAG;YACzC,IAAI,MAAM,YAAY,KAAK,YACzB,OAAO,IAAI,GAAG;YAEhB,OAAO,IAAI,QAAQ,CAAC,SAAS;gBAC3B,IAAI;gBACJ,OAAO,MAAM,GAAG,IAAM,QAAQ;gBAC9B,OAAO,OAAO,GAAG;gBAChB,CAAA,iBAAiB,SAAS,IAAI,AAAD,MAAO,QAAQ,mBAAmB,KAAK,KAAK,eAAe,WAAW,CAAC;YACvG;QACF,OAAO,IAAI,OAAO,kBAAkB,YAAY;YAC9C,iBAAiB;YACjB,IAAI,MAAM,YAAY,KAAK,YACzB,OAAO,OAAmB,MAAM,GAAG,GAAG,QAAQ,KAAK,GAAG;iBAEtD,OAAO,IAAI,QAAQ,CAAC,SAAS;gBAC3B,IAAI;oBACF,cAA0B,MAAM,GAAG,GAAG,QAAQ,KAAK,GAAG;oBACtD;gBACF,EAAE,OAAO,KAAK;oBACZ,OAAO;gBACT;YACF;QAEJ;IACF;AACF;AACA,eAAe,gBAAgB,MAAM;IACnC,OAAO,eAAe,GAAG,OAAO,MAAM,CAAC;IACvC,IAAI;IACJ,IAAI;QACF,kEAAkE;QAClE,gEAAgE;QAChE,gEAAgE;QAChE,mDAAmD;QACnD,iDAAiD;QACjD,mDAAmD;QACnD,IAAI,CAAC,mBAAmB;YACtB,IAAI,WAAW,OAAO,GAAG,CAAC,CAAA;gBACxB,IAAI;gBACJ,OAAO,AAAC,CAAA,eAAe,YAAY,MAAK,MAAO,QAAQ,iBAAiB,KAAK,IAAI,KAAK,IAAI,aAAa,KAAK,CAAC,CAAA;oBAC3G,oBAAoB;oBACpB,IAAI,UAAU,OAAO,OAAO,IAAI,OAAO,OAAO,CAAC,WAAW,GAAG,gBAAgB,IAAI,KAAK,OAAO,4BAA4B,eAAe,kBAAkB,0BAA0B;wBAClL,OAAO,OAAO,CAAC,MAAM;wBACrB;oBACF;oBACA,MAAM;gBACR;YACF;YACA,kBAAkB,MAAM,QAAQ,GAAG,CAAC;QACtC;QACA,OAAO,OAAO,CAAC,SAAU,KAAK;YAC5B,SAAS,OAAO,MAAM,CAAC,IAAI,EAAE;QAC/B;IACF,SAAU;QACR,OAAO,OAAO,eAAe;QAC7B,IAAI,iBACF,gBAAgB,OAAO,CAAC,CAAA;YACtB,IAAI,QAAQ;gBACV,IAAI;gBACH,CAAA,kBAAkB,SAAS,IAAI,AAAD,MAAO,QAAQ,oBAAoB,KAAK,KAAK,gBAAgB,WAAW,CAAC;YAC1G;QACF;IAEJ;AACF;AACA,SAAS,SAAS,OAAO,kBAAkB,GAAnB,EAAuB,MAAM,cAAc,GAAf;IAClD,IAAI,UAAU,OAAO,OAAO;IAC5B,IAAI,CAAC,SACH;IAEF,IAAI,MAAM,IAAI,KAAK,OACjB;SACK,IAAI,MAAM,IAAI,KAAK,MAAM;QAC9B,IAAI,OAAO,MAAM,YAAY,CAAC,OAAO,aAAa,CAAC;QACnD,IAAI,MAAM;YACR,IAAI,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE;gBACrB,iEAAiE;gBACjE,oHAAoH;gBACpH,IAAI,UAAU,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE;gBAClC,IAAK,IAAI,OAAO,QACd,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,EAAE;oBAC5C,IAAI,KAAK,OAAO,CAAC,IAAI;oBACrB,IAAI,UAAU,WAAW,OAAO,MAAM,CAAC,IAAI,EAAE;oBAC7C,IAAI,QAAQ,MAAM,KAAK,GACrB,UAAU,OAAO,MAAM,CAAC,IAAI,EAAE;gBAElC;YAEJ;YACA,IAAI,mBAGF,AAFA,4DAA4D;YAC5D,+CAA+C;YAC9C,CAAA,GAAG,IAAG,EAAG,MAAM,MAAM;YAGxB,aAAa;YACb,IAAI,KAAK,OAAO,eAAe,CAAC,MAAM,EAAE,CAAC;YACzC,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG;gBAAC;gBAAI;aAAK;QAChC,OAAO,IAAI,OAAO,MAAM,EACtB,SAAS,OAAO,MAAM,EAAE;IAE5B;AACF;AACA,SAAS,UAAU,MAAM,EAAE,EAAE;IAC3B,IAAI,UAAU,OAAO,OAAO;IAC5B,IAAI,CAAC,SACH;IAEF,IAAI,OAAO,CAAC,GAAG,EAAE;QACf,8EAA8E;QAC9E,IAAI,OAAO,OAAO,CAAC,GAAG,CAAC,EAAE;QACzB,IAAI,UAAU,EAAE;QAChB,IAAK,IAAI,OAAO,KAAM;YACpB,IAAI,UAAU,WAAW,OAAO,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI;YACtD,IAAI,QAAQ,MAAM,KAAK,GACrB,QAAQ,IAAI,CAAC,IAAI,CAAC,IAAI;QAE1B;QAEA,sGAAsG;QACtG,OAAO,OAAO,CAAC,GAAG;QAClB,OAAO,OAAO,KAAK,CAAC,GAAG;QAEvB,0BAA0B;QAC1B,QAAQ,OAAO,CAAC,CAAA;YACd,UAAU,OAAO,MAAM,CAAC,IAAI,EAAE;QAChC;IACF,OAAO,IAAI,OAAO,MAAM,EACtB,UAAU,OAAO,MAAM,EAAE;AAE7B;AACA,SAAS,eAAe,OAAO,kBAAkB,GAAnB,EAAuB,GAAG,WAAW,GAAZ,EAAgB,aAAa,uCAAuC,GAAxC;IACjF,IAAI,kBAAkB,QAAQ,IAAI,eAChC,OAAO;IAGT,uGAAuG;IACvG,IAAI,UAAU,WAAW,OAAO,MAAM,CAAC,IAAI,EAAE;IAC7C,IAAI,WAAW;IACf,MAAO,QAAQ,MAAM,GAAG,EAAG;QACzB,IAAI,IAAI,QAAQ,KAAK;QACrB,IAAI,IAAI,kBAAkB,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE;QACtC,IAAI,GACF,+EAA+E;QAC/E,WAAW;aACN;YACL,yDAAyD;YACzD,IAAI,IAAI,WAAW,OAAO,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;YAC3C,IAAI,EAAE,MAAM,KAAK,GAAG;gBAClB,kFAAkF;gBAClF,WAAW;gBACX;YACF;YACA,QAAQ,IAAI,IAAI;QAClB;IACF;IACA,OAAO;AACT;AACA,SAAS,kBAAkB,OAAO,kBAAkB,GAAnB,EAAuB,GAAG,WAAW,GAAZ,EAAgB,aAAa,uCAAuC,GAAxC;IACpF,IAAI,UAAU,OAAO,OAAO;IAC5B,IAAI,CAAC,SACH;IAEF,IAAI,gBAAgB,CAAC,YAAY,CAAC,OAAO,aAAa,CAAC,EAAE;QACvD,2EAA2E;QAC3E,yEAAyE;QACzE,IAAI,CAAC,OAAO,MAAM,EAChB,OAAO;QAET,OAAO,eAAe,OAAO,MAAM,EAAE,IAAI;IAC3C;IACA,IAAI,aAAa,CAAC,GAAG,EACnB,OAAO;IAET,aAAa,CAAC,GAAG,GAAG;IACpB,IAAI,SAAS,OAAO,KAAK,CAAC,GAAG;IAC7B,gBAAgB,IAAI,CAAC;QAAC;QAAQ;KAAG;IACjC,IAAI,CAAC,UAAU,OAAO,GAAG,IAAI,OAAO,GAAG,CAAC,gBAAgB,CAAC,MAAM,EAAE;QAC/D,eAAe,IAAI,CAAC;YAAC;YAAQ;SAAG;QAChC,OAAO;IACT;AACF;AACA,SAAS,WAAW,OAAO,kBAAkB,GAAnB,EAAuB,GAAG,WAAW,GAAZ;IACjD,IAAI,SAAS,OAAO,KAAK,CAAC,GAAG;IAC7B,OAAO,OAAO,CAAC,GAAG,GAAG,CAAC;IACtB,IAAI,UAAU,OAAO,GAAG,EACtB,OAAO,GAAG,CAAC,IAAI,GAAG,OAAO,OAAO,CAAC,GAAG;IAEtC,IAAI,UAAU,OAAO,GAAG,IAAI,OAAO,GAAG,CAAC,iBAAiB,CAAC,MAAM,EAC7D,OAAO,GAAG,CAAC,iBAAiB,CAAC,OAAO,CAAC,SAAU,EAAE;QAC/C,GAAG,OAAO,OAAO,CAAC,GAAG;IACvB;IAEF,OAAO,OAAO,KAAK,CAAC,GAAG;AACzB;AACA,SAAS,UAAU,OAAO,kBAAkB,GAAnB,EAAuB,GAAG,WAAW,GAAZ;IAChD,sBAAsB;IACtB,OAAO;IAEP,6DAA6D;IAC7D,IAAI,SAAS,OAAO,KAAK,CAAC,GAAG;IAC7B,IAAI,UAAU,OAAO,GAAG,IAAI,OAAO,GAAG,CAAC,gBAAgB,CAAC,MAAM,EAC5D,OAAO,GAAG,CAAC,gBAAgB,CAAC,OAAO,CAAC,SAAU,EAAE;QAC9C,IAAI,qBAAqB,GAAG;YAC1B,OAAO,WAAW,OAAO,MAAM,CAAC,IAAI,EAAE;QACxC;QACA,IAAI,sBAAsB,eAAe,MAAM,EAAE;YAC/C,mBAAmB,OAAO,CAAC,SAAU,CAAC;gBACpC,WAAW,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;YACvB;YAEA,+BAA+B;YAC/B,eAAe,IAAI,CAAC,KAAK,CAAC,gBAAgB;QAC5C;IACF;AAEJ;;;ACvfA;AAEA,IAAI,MACF,SACA,QACA,oBACA,mBACA,SACA,SACA,kBACA;AAEF,MAAM,WAAW;IACf,QAAQ;IACR,UAAU;AACZ;AAEA,SAAS,UAAU,IAAI;IACrB,OAAO,mBAAmB,KAAK,SAAS,CAAC,QAAQ,uBAAuB;AAC1E;AAEA,uDAAuD;AACvD,mEAAmE;AACnE,SAAS,YAAY,MAAM;IACzB,QAAQ,GAAG,CAAC,KAAK;IACjB,IAAI;QACF,OAAO,KAAK,KAAK,CAAC,mBAAmB,UAAU,uBAAuB;IACxE,EAAE,OAAO,KAAK;QACZ,gCAAgC;QAChC,QAAQ,KAAK,CAAC,SAAS;QACvB,OAAO;IACT;AACF;AAEA,oEAAoE;AACpE,SAAS;IACP,kCAAkC;IAClC,iDAAiD;IACjD,OAAO,QAAQ,CAAC,IAAI,GAAG,UAAU;AACjC,gDAAgD;AAClD;AAEA,4DAA4D;AAC5D,eAAe;IACb,QAAO,KAAK,KAAK;IACjB,OAAO;IAEP,iCAAiC;IACjC,IAAI;IACJ,0CAA0C;IAC1C,IAAI,WAAW,OAAO,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC;IAC9C,QAAQ,GAAG,CAAC,wBAAwB,WAAW,eAAe;IAC9D,8CAA8C;IAC9C,IAAI,aAAa,aAAa,aAAa,IAAI;QAC7C,QAAQ,GAAG,CAAC,SAAS,gBAAgB;QACrC,wCAAwC;QACxC,OAAO,YAAY;QACnB,QAAQ,GAAG,CAAC,aAAa;QACzB,IAAI,SAAS,WACX,QAAQ,qBAAqB;QAE/B,8BAA8B;QAC9B,IAAI,KAAK,MAAM,KAAK,WAAW;YAC7B,SAAS,MAAM,GAAG,KAAK,MAAM;YAC7B,YAAY,KAAK,GAAG,SAAS,MAAM;YACnC,OAAO,CAAA,GAAA,kBAAQ,AAAD,EAAE;gBAAE,OAAO;YAAS,GAAG;YACrC,CAAC,SAAS,OAAO,GAAG,KAAK,UAAU,CAAC;YACpC,CAAC,SAAS,QAAQ,GAAG,KAAK,UAAU,CAAC;YACrC,CAAC,kBAAkB,oBAAoB,GAAG,KAAK,UAAU,CAAC;YAC1D,CAAC,oBAAoB,kBAAkB,GAAG,KAAK,UAAU,CAAC;YAC1D,QAAQ,GAAG,CAAC;QACd;QACA,IAAI,KAAK,QAAQ,KAAK,WAAW;YAC/B,SAAS,QAAQ,GAAG,KAAK,QAAQ;YACjC,cAAc,OAAO,GAAG,SAAS,QAAQ;QAC3C;QACA,IAAI,SAAS,QAAQ,EACnB,UAAU,YAAY,CACnB,YAAY,CAAC;YACZ,OAAO;YACP,OAAO;QACT,GACC,IAAI,CAAC,CAAC;YACL,MAAM,CAAC,MAAM,GAAG,WAAW,cAAc;YACzC,MAAM,eAAe,MAAM,eAAe;YAC1C,MAAM,WAAW,MAAM,WAAW;YAClC,IAAI,CAAE,CAAA,UAAU,QAAO;iBAChB;gBACL,mBAAmB;oBACjB,KAAK,aAAa,IAAI,CAAC,GAAG;oBAC1B,KAAK,aAAa,IAAI,CAAC,GAAG;oBAC1B,MAAM,aAAa,IAAI,CAAC,IAAI;oBAC5B,OAAO,SAAS,IAAI;gBACtB;gBACA,QAAQ,CAAC,MAAM;oBACb,QAAQ,GAAG,CAAC,kBAAkB;oBAC9B,MAAM,gBAAgB,CAAC;wBAAE,UAAU;4BAAC;gCAAE,MAAM,KAAK,SAAS;4BAAC;yBAAE;oBAAC;gBAChE;YACF;YACA,eAAe,IAAI,aAAa;YAEhC,oBAAoB;gBAClB,aACG,SAAS,GACT,IAAI,CAAC,CAAC;oBACL,QAAQ;gBACV,GACC,KAAK,CAAC;YACX;YAEA,KAAK,SAAS,CAAC;YACf,KAAK,UAAU,CAAC,CAAC,SAAW,KAAK,SAAS,CAAC,YAAY;QACzD;aACG;YACH,kBAAkB,CAAC,MAAM;gBACrB,UAAU,GAAG,GAAG,KAAK,GAAG;gBACxB,UAAU,GAAG,GAAC,KAAK,GAAG;gBACtB,UAAU,IAAI,GAAG,KAAK,IAAI;gBAC1B,UAAU,KAAK,GAAG,KAAK,KAAK;YAChC;YACF,OAAO,CAAC,MAAM;gBACZ,MAAM,UAAU,OAAO,GAAG,CAAC,eAAe,CAAC,IAAI,KAAK;oBAAC;iBAAK;gBAC1D,MAAM,gBAAgB,SAAS,aAAa,CAAC;gBAE7C,cAAc,IAAI,GAAG;gBACrB,cAAc,QAAQ,GAAG;gBACzB,cAAc,KAAK,CAAC,OAAO,GAAG;gBAE9B,SAAS,IAAI,CAAC,WAAW,CAAC;gBAE1B,cAAc,KAAK;gBACnB,cAAc,MAAM;gBAEpB,OAAO,GAAG,CAAC,eAAe,CAAC;YAC7B;YACA,KAAK,YAAY,CAAC,CAAC,QAAQ;gBACzB,QAAQ,GAAG,CAAC,wBAAwB;gBAEpC,MAAM,SAAS,GAAG;gBAClB,MAAM,gBAAgB,CAAC,kBAAkB;oBACvC,MAAM,IAAI;gBACZ;YACF;QACF;IACF;AACA,wCAAwC;AAC1C;AAEA,MAAM,cAAc;IAClB,QAAQ,GAAG,CAAC;IACZ,iBAAiB,CAAC;AACpB;AACA,MAAM,aAAa,CAAC;IAClB,IAAI,YAAY,EAAE,MAAM,CAAC,KAAK;IAE9B,QAAQ,GAAG,CAAC,eAAe;IAC3B,QAAQ;QAAE,WAAW;IAAU;AACjC;AACA,IAAI,OAAO,SAAS,cAAc,CAAC;AACnC,IAAI,YAAY,SAAS,cAAc,CAAC;AACxC,IAAI,aAAa,SAAS,cAAc,CAAC;AACzC,UAAU,QAAQ,GAAG;AACrB,WAAW,OAAO,GAAG;AAErB,IAAI,cAAc,SAAS,cAAc,CAAC;AAC1C,IAAI,gBAAgB,SAAS,cAAc,CAAC;AAC5C,MAAM,QAAQ,SAAS,cAAc,CAAC;AAEtC,KAAK,QAAQ,GAAG,SAAU,KAAK;IAC7B,MAAM,cAAc;IACpB,IAAI,WAAW,IAAI,SAAS;IAC5B,IAAI,OAAO,OAAO,WAAW,CAAC;IAC9B,SAAS,MAAM,GAAG,KAAK,MAAM;IAC7B,SAAS,QAAQ,GAAG,KAAK,QAAQ,GAAG,OAAO;IAC3C,QAAQ,GAAG,CAAC,UAAU;IACtB;IACA,SAAS,MAAM;IAEf,OAAO;AACT;AAEA;;;;;ACrLA;AAAA;AAAA;AAAA;;;;;AC6SA;8CAvQa;qDAqQA;AA3Sb;;AACA;AAgBA;AAEA,MAAM,gBAAgB,CAAC;AACvB,MAAM,iBAAiB,CAAC;AACxB,MAAM,UAAU,CAAC;AACjB,MAAM,sBAAsB,CAAC;AAC7B,MAAM,kBAAkB,CAAC;AACzB,MAAM,YAAY;AAClB,MAAM,gBAAgB;AACtB,MAAM,oBAAoB;AAC1B,MAAM,sBAAsB;AAC5B,MAAM,kBAAkB;AACxB,MAAM,mBAAmB;AACzB,MAAM,gBAAgB;AACtB,MAAM,mBAAmB;IACvB;IACA;IACA;IACA;CACD;AAEM,MAAM,WAAW,CAAA,GAAA,kBAAS,AAAD,EAAE,eAAe,CAAC,QAAQ;IACxD,IAAI,OAAO,WAAW,IAAI,OAAO,iBAAiB,EAChD,MAAM,CAAA,GAAA,cAAK,AAAD,EACR;IAIJ,MAAM,iBAAiB,CAAC;IACxB,MAAM,MAAM,OAAO,QAAQ,IAAI,CAAA,GAAA,gBAAM,AAAD,EAAE,OAAO,QAAQ,EAAE;IACvD,MAAM,YAAY,CAAA,GAAA,kBAAS,AAAD,EAAE,QAAQ,kBAAkB;IAEtD,MAAM,YAAY,OAAO,MAAM,CAC5B,MAAM,CAAC,SAAS,CAAA,GAAA,oBAAW,AAAD,EAAE,CAAC,EAAE,CAAA,GAAA,gBAAO,AAAD,EAAE,CAAC,EAAE,OAAO,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,GAC9D,IAAI,CAAC,CAAA,SACJ,MAAM,IAAI,CAAC,IAAI,WAAW,SACvB,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC,KACpB,IAAI,CAAC,IACL,KAAK,CAAC,GAAG;IAGhB,MAAM,aAAa,CAAA,UACjB,CAAA,GAAA,oBAAW,AAAD,EACR,MAAM,SACH,IAAI,GACJ,GAAG,CAAC;YACH,MAAM,OAAO,CAAA,GAAA,iBAAQ,AAAD,EAAE,MAAM,OAAO,OAAO,SAAS;YAEnD,OAAO;gBACL,CAAA,GAAA,cAAK,AAAD,EAAE;gBACN;oBAAC;oBAAM,QAAQ,IAAI,QAAQ,CAAA,MAAO,KAAK,IAAI,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,MAAM,EAAE;gBAAK;aACjE;QACH;IAGN,MAAM,kBAAkB,OAAO,QAAQ;QACrC,MAAM,WAAW,MAAM;QACvB,IAAI;QAEJ,IAAI;YACF,MAAM,KAAK,KAAK,CAAC,EAAE,IAAI;QACzB,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,CAAC,EAAE,CAAA,GAAA,gBAAO,AAAD,EAAE,6BAA6B,CAAC;YACvD;QACF;QAEA,IAAI,IAAI,SAAS,KAAK,YAAa,IAAI,OAAO,IAAI,IAAI,OAAO,KAAK,CAAA,GAAA,eAAM,AAAD,GACrE;QAGF,MAAM,SAAS,GAAG,CAAC,iBAAiB;QAEpC,IAAI,QAAQ;YACV,QAAQ,IAAI,CACV,CAAC,EAAE,CAAA,GAAA,gBAAO,AAAD,EAAE,+BAA+B,EAAE,OAAO,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC;YAEtE;QACF;QAEA,IACE,IAAI,QAAQ,IACZ,IAAI,QAAQ,GAAG,gBACf,IAAI,QAAQ,IAAI,iBAChB;YACA,cAAc;YACd,eAAe,IAAI,QAAQ;YAC3B,mBAAmB,YAAY,aAAa,eAAe;QAC7D;QAEA,IAAI,IAAI,KAAK,IAAI,IAAI,QAAQ,EAAE;YAC7B,IAAI,cAAc,CAAC,IAAI,OAAO,CAAC,IAAI,aAAa,CAAC,IAAI,QAAQ,CAAC,EAC5D;YAGF,aAAa,CAAC,IAAI,QAAQ,CAAC,GAAG;YAE9B,MAAM,OAAO,CAAA,GAAA,iBAAQ,AAAD,EAAE,OAAO,OAAO,OAAO,SAAS;YAEpD,KAAK,IAAI,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,MAAM,EAAE,OAAM,SAC7B,OAAO,IAAI,CACT,KAAK,SAAS,CAAC;oBACb,QAAQ,MACJ;wBAAC,GAAG,MAAM;wBAAE,KAAK,MAAM,CAAA,GAAA,iBAAO,AAAD,EAAE,KAAK,OAAO,GAAG;oBAAC,IAC/C;oBACJ,QAAQ;oBACR,WAAW;oBACX,SAAS,CAAA,GAAA,eAAM,AAAD;oBACd,YAAY,IAAI,OAAO;oBACvB,UAAU,IAAI,QAAQ;gBACxB;YAGJ,KAAK,EAAE,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,OAAO,EAAE,IAAM,UAAU,MAAM,IAAI,OAAO;YACzD,KAAK,EAAE,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,KAAK,EAAE,IAAM,aAAa,MAAM,IAAI,OAAO,EAAE,IAAI,QAAQ;YACxE,KAAK,MAAM,CACT,MAAM;gBAAC,GAAG,IAAI,KAAK;gBAAE,KAAK,MAAM,CAAA,GAAA,iBAAO,AAAD,EAAE,KAAK,IAAI,KAAK,CAAC,GAAG;YAAC,IAAI,IAAI,KAAK;YAG1E;QACF;QAEA,IAAI,IAAI,MAAM,EAAE;YACd,IAAI,cAAc,CAAC,IAAI,OAAO,CAAC,IAAI,aAAa,CAAC,IAAI,QAAQ,CAAC,EAC5D;YAGF,MAAM,QAAQ,SAAS,CAAC,IAAI,QAAQ,CAAC;YAErC,IAAI,OAAO;gBACT,MAAM,EAAC,IAAI,EAAC,GAAG;gBAEf,IAAI,KAAK,SAAS,EAChB;gBAGF,aAAa,CAAC,IAAI,QAAQ,CAAC,GAAG;gBAC9B,KAAK,EAAE,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,OAAO,EAAE,IACtB,UAAU,MAAM,IAAI,OAAO,EAAE,IAAI,QAAQ;gBAE3C,KAAK,EAAE,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,KAAK,EAAE,IACpB,aAAa,MAAM,IAAI,OAAO,EAAE,IAAI,QAAQ;gBAE9C,KAAK,MAAM,CACT,MACI;oBAAC,GAAG,IAAI,MAAM;oBAAE,KAAK,MAAM,CAAA,GAAA,iBAAO,AAAD,EAAE,KAAK,IAAI,MAAM,CAAC,GAAG;gBAAC,IACvD,IAAI,MAAM;YAElB;QACF;IACF;IAEA,MAAM,WAAW,OAAO,QAAQ,WAC9B,OAAO,IAAI,CACT,KAAK,SAAS,CAAC;YACb,QAAQ;YACR,WAAW;YACX,SAAS;YACT,SAAS,CAAA,GAAA,eAAM,AAAD;YACd,QAAQ,MAAM,QAAQ,GAAG,CACvB,CAAA,GAAA,gBAAO,AAAD,EAAE,WAAW,GAAG,CAAC,OAAO,CAAC,IAAI,EAAC,MAAM,EAAC,CAAC;gBAC1C,MAAM,QAAQ,MAAM;gBAEpB,OAAO;oBACL,UAAU;oBACV,OAAO,MACH;wBAAC,GAAG,KAAK;wBAAE,KAAK,MAAM,CAAA,GAAA,iBAAO,AAAD,EAAE,KAAK,MAAM,GAAG;oBAAC,IAC7C;gBACN;YACF;QAEJ;IAGJ,MAAM,aAAa,CAAC,KAAK,UAAU;QACjC,IAAI,UAAU,CAAC,cAAc,CAAC,IAAI,EAAE;YAClC,eAAe,CAAC,IAAI,GAAG;gBACrB,GAAG,eAAe,CAAC,IAAI;gBACvB,CAAC,SAAS,EAAE;YACd;YACA,cAAc,CAAC,IAAI,GAAG,IAAI,QAAQ,CAAA;gBAChC,MAAM,SAAS,IAAI,UAAU;gBAC7B,OAAO,CAAC,IAAI,GAAG;gBAEf,OAAO,gBAAgB,CAAC,QAAQ;oBAC9B,2CAA2C;oBAC3C,mBAAmB,CAAC,IAAI,GAAG,mBAAmB;oBAC9C,IAAI;gBACN;gBAEA,OAAO,gBAAgB,CAAC,WAAW,CAAA,IACjC,CAAA,GAAA,eAAM,AAAD,EAAE,eAAe,CAAC,IAAI,EAAE,OAAO,CAAC,CAAA,IAAK,EAAE,QAAQ;gBAGtD,OAAO,gBAAgB,CAAC,SAAS;oBAC/B,mBAAmB,CAAC,IAAI,GACtB,mBAAmB,CAAC,IAAI,IAAI,mBAAmB;oBAEjD,MAAM,CAAA,GAAA,cAAK,AAAD,EAAE,mBAAmB,CAAC,IAAI;oBACpC,mBAAmB,CAAC,IAAI,IAAI;oBAE5B,WAAW,KAAK,UAAU;gBAC5B;YACF;QACF,OACE,eAAe,CAAC,IAAI,CAAC,SAAS,GAAG;QAGnC,OAAO,cAAc,CAAC,IAAI;IAC5B;IAEA,MAAM,cAAc;QAClB,MAAM,WAAW,MAAM;QAEvB,IAAI,WACF;QAGF,YAAY,WAAW;QAEvB,UAAU,OAAO,CAAC,OAAM;YACtB,MAAM,SAAS,MAAM,WAAW,KAAK;YAErC,IAAI,OAAO,UAAU,KAAK,UAAU,IAAI,EACtC,SAAS,QAAQ;iBACZ,IAAI,OAAO,UAAU,KAAK,UAAU,UAAU,EACnD,SAAS,MAAM,WAAW,KAAK,UAAU,OAAO;QAEpD;IACF;IAEA,MAAM,YAAY;QAChB,CAAA,GAAA,gBAAO,AAAD,EAAE,WAAW,OAAO,CAAC,CAAC,CAAC,IAAI,EAAC,IAAI,EAAC,CAAC;YACtC,IAAI,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,EAC3C,KAAK,OAAO;QAEhB;QAEA,gBAAgB,CAAC;IACnB;IAEA,MAAM,YAAY,CAAC,MAAM,IAAI;QAC3B,cAAc,MAAM;QACpB,cAAc,CAAC,GAAG,GAAG;QAErB,IAAI,SACF,cAAc,CAAC,QAAQ,GAAG;IAE9B;IAEA,MAAM,eAAe,CAAC,MAAM,QAAQ;QAClC,OAAO,cAAc,CAAC,OAAO;QAC7B,KAAK,OAAO;QAEZ,MAAM,gBAAgB,WAAW;QAEjC,IAAI,eAAe;YACjB,OAAO,SAAS,CAAC,QAAQ;YACzB,YAAY;gBAAC,GAAG,SAAS;gBAAE,GAAG,WAAW,EAAE;YAAA;QAC7C;IACF;IAEA,IAAI,eAAe;IACnB,IAAI,mBAAmB,YAAY,aAAa,eAAe;IAC/D,IAAI,gBAAgB,CAAA,GAAA,aAAI,AAAD;IACvB,IAAI,gBAAgB,CAAC;IACrB,IAAI;IAEJ;IAEA,OAAO,CAAA,GAAA,sBAAI,AAAD,EACR,CAAA,IAAM,gBAAgB,GACtB;QACE,MAAM,WAAW,MAAM;QAEvB,UAAU,OAAO,CAAC,CAAA,MAAO,OAAO,eAAe,CAAC,IAAI,CAAC,SAAS;QAC9D,OAAO,aAAa,CAAC,GAAG;QACxB,cAAc;QACd;IACF;AAEJ;AAEO,MAAM,kBAAkB,IAAO,CAAA;QAAC,GAAG,OAAO;IAAA,CAAA;;;;;AC3SjD;AAYA,MAAM,aAAa,OAAO,cAAc,CAAC;AACzC,MAAM,gBAAgB;AACtB,MAAM,YAAY;AAClB,MAAM,aAAa,YAAY;AAC/B,MAAM,WAAW,aAAa;AAC9B,MAAM,gBAAgB,WAAW;AACjC,MAAM,eAAe,gBAAgB;AACrC,MAAM,YAAY,QAAe;AACjC,MAAM,aAAa;AACnB,MAAM,eAAe;kBAEN,CAAC,QAAQ;IACtB,MAAM,UAAU,CAAC;IACjB,MAAM,UAAU,CAAC;IACjB,MAAM,uBAAuB,CAAC;IAC9B,MAAM,eAAe,CAAC;IACtB,MAAM,qBAAqB,CAAC;IAC5B,MAAM,oBAAoB,CAAC;IAE3B,MAAM,UAAU,CAAC,SAAS,IACxB,AAAC,CAAA,UACG,MAAM,OAAO,CAAC,WACZ,UACA;YAAC;SAAQ,GACX,CAAA,GAAA,aAAI,AAAD,EAAE,QAAO,EACd,OAAO,CAAC,CAAA;YACR,MAAM,OAAO,OAAO,CAAC,GAAG;YAExB,IAAI,CAAC,MAAM;gBACT,QAAQ,IAAI,CAAC,CAAC,EAAE,CAAA,GAAA,gBAAO,AAAD,EAAE,kBAAkB,EAAE,GAAG,MAAM,CAAC;gBACtD,OAAO,EAAE;YACX;YAEA,OAAO,EAAE,IAAI;QACf;IAEF,MAAM,WAAW,CAAA;QACf,IAAI,CAAC,OAAO,CAAC,GAAG,EACd;QAGF,OAAO,OAAO,CAAC,GAAG;QAClB,OAAO,oBAAoB,CAAC,GAAG;QAC/B,OAAO,YAAY,CAAC,GAAG;QACvB,YAAY;IACd;IAEA,MAAM,aAAa,CAAA;QACjB,IAAI,OAAO,CAAC,KAAK,EACf,OAAO;YACL,OAAO,CAAC,KAAK,CAAC,IAAI;YAClB,OAAO,CAAC,KAAK,CAAC,aAAa;YAC3B,OAAO,CAAC,KAAK,CAAC,aAAa;SAC5B;QAGH,IAAI,CAAC,MACH,MAAM,CAAA,GAAA,cAAK,AAAD,EAAE;QAGd,MAAM,YAAY,CAAA,GAAA,oBAAW,AAAD,EAAE;QAE9B,IAAI,UAAU,UAAU,GAAG,eACzB,MAAM,CAAA,GAAA,cAAK,AAAD,EACR,CAAC,oBAAoB,EAAE,KAAK,GAAG,EAAE,UAAU,UAAU,CAAC,WAAW,CAAC,GAChE,CAAC,YAAY,EAAE,cAAc,+BAA+B,CAAC;QAInE,MAAM,kBAAkB,IAAI,WAAW;QACvC,gBAAgB,GAAG,CAAC;QAEpB,IAAI,QAAQ;QAEZ,OAAO,CAAC,KAAK,GAAG;YACd,YAAY,CAAA,GAAA,aAAI,AAAD;YACf,YAAY,CAAA,GAAA,aAAI,AAAD;YAEf,eAAe,CAAA,IAAM,OAAO,CAAC,KAAK,GAAG;oBAAC,GAAG,OAAO,CAAC,KAAK;oBAAE,YAAY;gBAAC;YAErE,eAAe,CAAA,IAAM,OAAO,CAAC,KAAK,GAAG;oBAAC,GAAG,OAAO,CAAC,KAAK;oBAAE,YAAY;gBAAC;YAErE,MAAM,OAAO,MAAM,SAAS,MAAM;gBAChC,IAAI,QAAQ,OAAO,SAAS,UAC1B,MAAM,CAAA,GAAA,cAAK,AAAD,EAAE;gBAGd,IAAI,SAAS,WACX,MAAM,CAAA,GAAA,cAAK,AAAD,EAAE;gBAGd,MAAM,SAAS,OAAO,SAAS;gBAC/B,MAAM,SAAS,gBAAgB;gBAC/B,MAAM,WACJ,UAAU,gBAAgB,eAAe,gBAAgB;gBAE3D,IAAI,QAAQ,CAAC,UACX,MAAM,CAAA,GAAA,cAAK,AAAD,EAAE;gBAGd,MAAM,SAAS,WACX,IAAI,WAAW,SAAS,MAAM,KAAK,WAAW,KAAK,QACnD,CAAA,GAAA,oBAAW,AAAD,EAAE,SAAS,KAAK,SAAS,CAAC,QAAQ;gBAEhD,MAAM,cAAc,OAAO,CAAA,GAAA,oBAAW,AAAD,EAAE,KAAK,SAAS,CAAC,SAAS;gBAE/D,MAAM,aACJ,KAAK,IAAI,CAAC,OAAO,UAAU,GAAG,aAAc,CAAA,OAAO,IAAI,CAAA,KAAM;gBAE/D,MAAM,SAAS,MAAM,YAClB,IAAI,GACJ,GAAG,CAAC,CAAC,GAAG;oBACP,MAAM,SAAS,MAAM,aAAa;oBAClC,MAAM,SAAS,QAAQ,MAAM;oBAC7B,MAAM,QAAQ,IAAI,WAChB,eACG,CAAA,SACG,YAAY,UAAU,GACtB,SACE,OAAO,UAAU,GACjB,YAAa,CAAA,aAAc,CAAA,OAAO,IAAI,CAAA,CAAC,IACvC,SAAQ;oBAGlB,MAAM,GAAG,CAAC;oBACV,MAAM,GAAG,CAAC;wBAAC;qBAAM,EAAE;oBACnB,MAAM,GAAG,CACP;wBAAC,SAAU,UAAU,IAAM,YAAY,IAAM,UAAU;qBAAG,EAC1D;oBAEF,MAAM,GAAG,CACP;wBAAC,KAAK,KAAK,CAAC,AAAE,CAAA,IAAI,CAAA,IAAK,aAAc;qBAAY,EACjD;oBAEF,MAAM,GAAG,CACP,OACI,SACE,cACA,OAAO,QAAQ,CAAC,AAAC,CAAA,IAAI,CAAA,IAAK,WAAW,IAAI,aAC3C,OAAO,QAAQ,CAAC,IAAI,WAAW,AAAC,CAAA,IAAI,CAAA,IAAK,YAC7C;oBAGF,OAAO;gBACT;gBAEF,QAAQ,AAAC,QAAQ,IAAK;gBAEtB,OAAO,QAAQ,GAAG,CAChB,QAAQ,SAAS,OAAO,IAAI;oBAC1B,MAAM,OAAO,KAAK,QAAQ;oBAC1B,IAAI,SAAS;oBAEb,MAAO,SAAS,WAAY;wBAC1B,MAAM,QAAQ,MAAM,CAAC,OAAO;wBAE5B,IAAI,KAAK,cAAc,GAAG,KAAK,0BAA0B,EACvD,MAAM,IAAI,QAAQ,CAAA;4BAChB,MAAM,OAAO;gCACX,KAAK,mBAAmB,CAAC,cAAc;gCACvC;4BACF;4BAEA,KAAK,gBAAgB,CAAC,cAAc;wBACtC;wBAGF,IAAI,CAAC,OAAO,CAAC,GAAG,EACd;wBAGF,KAAK,IAAI,CAAC;wBACV;wBAEA,IAAI,YACF,WAAW,KAAK,CAAC,cAAc,GAAG,YAAY,IAAI;oBAEtD;gBACF;YAEJ;QACF;QAEA,OAAO;YACL,OAAO,CAAC,KAAK,CAAC,IAAI;YAClB,OAAO,CAAC,KAAK,CAAC,aAAa;YAC3B,OAAO,CAAC,KAAK,CAAC,aAAa;SAC5B;IACH;IAEA,MAAM,aAAa,CAAC,IAAI;QACtB,MAAM,SAAS,IAAI,WAAW;QAC9B,MAAM,OAAO,CAAA,GAAA,oBAAW,AAAD,EAAE,OAAO,QAAQ,CAAC,WAAW,aAAa,UAAU,CACzE,MACA;QAEF,MAAM,CAAC,MAAM,GAAG,OAAO,QAAQ,CAAC,YAAY;QAC5C,MAAM,CAAC,IAAI,GAAG,OAAO,QAAQ,CAAC,UAAU;QACxC,MAAM,CAAC,SAAS,GAAG,OAAO,QAAQ,CAAC,eAAe;QAClD,MAAM,UAAU,OAAO,QAAQ,CAAC;QAChC,MAAM,SAAS,CAAC,CAAE,CAAA,MAAM,CAAA;QACxB,MAAM,SAAS,CAAC,CAAE,CAAA,MAAO,CAAM;QAC/B,MAAM,WAAW,CAAC,CAAE,CAAA,MAAO,CAAM;QACjC,MAAM,SAAS,CAAC,CAAE,CAAA,MAAO,CAAM;QAE/B,IAAI,CAAC,OAAO,CAAC,KAAK,EAChB,MAAM,CAAA,GAAA,cAAK,AAAD,EAAE,CAAC,yCAAyC,EAAE,KAAK,CAAC,CAAC;QAGjE,IAAI,CAAC,oBAAoB,CAAC,GAAG,EAC3B,oBAAoB,CAAC,GAAG,GAAG,CAAC;QAG9B,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,KAAK,EACjC,oBAAoB,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC;QAGpC,IAAI,SAAS,oBAAoB,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM;QAElD,IAAI,CAAC,QACH,SAAS,oBAAoB,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG;YAAC,QAAQ,EAAE;QAAA;QAG9D,IAAI,QACF,OAAO,IAAI,GAAG,KAAK,KAAK,CAAC,CAAA,GAAA,oBAAW,AAAD,EAAE;aAErC,OAAO,MAAM,CAAC,IAAI,CAAC;QAGrB,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,WAAW,YAAY,IAAI,OAAO,IAAI;QAE/D,IAAI,CAAC,QACH;QAGF,MAAM,OAAO,IAAI,WACf,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,UAAU,EAAE;QAGnD,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG;YACvB,KAAK,GAAG,CAAC,GAAG;YACZ,OAAO,IAAI,EAAE,UAAU;QACzB,GAAG;QAEH,IAAI,UACF,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,IAAI,OAAO,IAAI;aACzC;YACL,MAAM,OAAO,CAAA,GAAA,oBAAW,AAAD,EAAE;YACzB,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,SAAS,KAAK,KAAK,CAAC,QAAQ,MAAM;QAC7D;QAEA,OAAO,oBAAoB,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM;IAC9C;IAEA,MAAM,CAAC,UAAU,QAAQ,GAAG,WAAW;IACvC,MAAM,CAAC,UAAU,QAAQ,GAAG,WAAW;IACvC,MAAM,CAAC,YAAY,UAAU,GAAG,WAAW;IAC3C,MAAM,CAAC,gBAAgB,cAAc,GAAG,WAAW;IACnD,MAAM,CAAC,eAAe,aAAa,GAAG,WAAW;IAEjD,IAAI,aAAa,CAAA,GAAA,aAAI,AAAD;IACpB,IAAI,cAAc,CAAA,GAAA,aAAI,AAAD;IACrB,IAAI,eAAe,CAAA,GAAA,aAAI,AAAD;IACtB,IAAI,cAAc,CAAA,GAAA,aAAI,AAAD;IAErB,OAAO,CAAC,MAAM;QACZ,IAAI,OAAO,CAAC,GAAG,EACb;QAGF,MAAM,SAAS,WAAW,IAAI,CAAC,MAAM;QAErC,OAAO,CAAC,GAAG,GAAG;QAEd,KAAK,EAAE,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,MAAM,EAAE,CAAA,MAAO,WAAW,KAAK;QAC9C,KAAK,EAAE,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,KAAK,EAAE,IAAM,SAAS;QACrC,KAAK,EAAE,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,IAAI,EAAE;QAErB,KAAK,EAAE,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,MAAM,EAAE,CAAA;YACrB,aAAa,QAAQ,IAAI,kBAAkB,CAAC,GAAG;YAC/C,OAAO,kBAAkB,CAAC,GAAG;QAC/B;QAEA,KAAK,EAAE,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,KAAK,EAAE,CAAC,OAAO;YAC5B,YAAY,OAAO,QAAQ,IAAI,iBAAiB,CAAC,GAAG;YACpD,OAAO,iBAAiB,CAAC,GAAG;QAC9B;QAEA,KAAK,EAAE,CAAC,CAAA,GAAA,eAAM,AAAD,EAAE,KAAK,EAAE,CAAA;YACpB,IAAI,EAAE,IAAI,KAAK,oBACb;YAEF,QAAQ,KAAK,CAAC;QAChB;QAEA,WAAW;QACX,KAAK,gBAAgB,CAAC;IACxB;IAEA,QAAQ,CAAC,GAAG,KAAO,SAAS,IAAI;IAEhC,QAAQ,CAAC,GAAG;QACV,IAAI,YAAY,CAAC,GAAG,EAAE;YACpB,YAAY,CAAC,GAAG;YAChB,OAAO,YAAY,CAAC,GAAG;QACzB;IACF;IAEA,UAAU,CAAC,KAAK;QACd,IAAI,OAAO,CAAC,GAAG,EACb,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC;IAEvB;IAEA,cAAc,CAAC,MAAM,KAAQ,kBAAkB,CAAC,GAAG,GAAG;IAEtD,aAAa,CAAC,MAAM,KAAQ,iBAAiB,CAAC,GAAG,GAAG;IAEpD,OAAO;QACL;QAEA,MAAM,OAAM;YACV,IAAI,CAAC,IACH,MAAM,CAAA,GAAA,cAAK,AAAD,EAAE;YAGd,MAAM,QAAQ,KAAK,GAAG;YAEtB,SAAS,IAAI;YACb,MAAM,IAAI,QAAQ,CAAA,MAAQ,YAAY,CAAC,GAAG,GAAG;YAC7C,OAAO,KAAK,GAAG,KAAK;QACtB;QAEA,OAAO;YACL,CAAA,GAAA,gBAAO,AAAD,EAAE,SAAS,OAAO,CAAC,CAAC,CAAC,IAAI,KAAK;gBAClC,KAAK,OAAO;gBACZ,OAAO,OAAO,CAAC,GAAG;YACpB;YACA;QACF;QAEA,UAAU,IACR,CAAA,GAAA,oBAAW,AAAD,EAAE,CAAA,GAAA,gBAAO,AAAD,EAAE,SAAS,GAAG,CAAC,CAAC,CAAC,IAAI,KAAK,GAAK;oBAAC;oBAAI,KAAK,GAAG;iBAAC;QAEjE,WAAW,CAAC,QAAQ,SAAS,OAC3B,QAAQ,SAAS,OAAO,IAAI;gBAC1B,IAAI,MACF,MAAM,eAAe,MAAM;gBAG7B,KAAK,SAAS,CAAC;YACjB;QAEF,cAAc,CAAC,QAAQ,UACrB,QAAQ,SAAS,CAAC,GAAG,OAAS,KAAK,YAAY,CAAC;QAElD,UAAU,CAAC,OAAO,QAAQ,SAAS,OACjC,QAAQ,SAAS,OAAO,IAAI;gBAC1B,IAAI,MACF,MAAM,cAAc,MAAM;gBAG5B,KAAK,QAAQ,CAAC,OAAO;YACvB;QAEF,aAAa,CAAC,OAAO,QAAQ,UAC3B,QAAQ,SAAS,CAAC,GAAG,OAAS,KAAK,WAAW,CAAC,OAAO;QAExD,cAAc,CAAC,UAAU,UAAU,QAAQ,SAAS,OAClD,QAAQ,SAAS,OAAO,IAAI;gBAC1B,IAAI,MACF,MAAM,cAAc,MAAM;gBAG5B,KAAK,YAAY,CAAC,UAAU,UAAU;YACxC;QAEF,YAAY,CAAA,IAAM,aAAa;QAE/B,aAAa,CAAA,IAAM,cAAc;QAEjC,cAAc,CAAA,IAAM,eAAe;QAEnC,aAAa,CAAA,IAAM,cAAc;IACnC;AACF;;;;;8CCzYa;2CAgBA;+CAMA;6CAoBA;4CAEA;0CAEC;4CAAM;6CAAQ;iDAAS;0CAExB;2CAEA;iDAEA;iDAEA;2CAEA;4CAGA;+CAOA;2CAQA;AA9Eb;;AAEA,MAAM,UAAU;AAET,MAAM,WAAW,CAAC,WAAW,SAAS;IAC3C,MAAM,OAAO,IAAI,CAAA,GAAA,+BAAI,AAAD,EAAE;QAAC;QAAW;QAAS;IAAM;IACjD,MAAM,SAAS,CAAA,OAAQ,KAAK,iBAAiB,CAAC,IAAI,CAAC;IAEnD,KAAK,EAAE,CAAC,OAAO,IAAI,EAAE;IACrB,KAAK,iBAAiB,GAAG,EAAE;IAC3B,KAAK,gBAAgB,GAAG,CAAA;QACtB,KAAK,GAAG,CAAC,OAAO,IAAI,EAAE;QACtB,KAAK,iBAAiB,CAAC,OAAO,CAAC;QAC/B,OAAO,KAAK,iBAAiB;QAC7B,OAAO,KAAK,gBAAgB;IAC9B;IAEA,OAAO;AACT;AAEO,MAAM,QAAQ,CAAA,IACnB,MAAM,GACH,IAAI,GACJ,GAAG,CAAC,IAAM,OAAO,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,QAAQ,MAAM,EAAE,EAC7D,IAAI,CAAC;AAEH,MAAM,YAAY,CAAC,eAAe,IAAM,CAAC,QAAQ;QACtD,IAAI,aAAa,CAAC,GAAG,EACnB,OAAO,aAAa,CAAC,GAAG;QAG1B,IAAI,CAAC,QACH,MAAM,MAAM;QAGd,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,OAAO,WAAW,EACtC,MAAM,MAAM;QAGd,IAAI,CAAC,IACH,MAAM,MAAM;QAGd,OAAQ,aAAa,CAAC,GAAG,GAAG,EAAE,QAAQ;IACxC;AAEO,MAAM,UAAU;AAEhB,MAAM,SAAS,MAAM;AAErB,MAAM,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,WAAW,EAAC,GAAG;AAE7C,MAAM,OAAO,KAAO;AAEpB,MAAM,QAAQ,CAAA,MAAO,IAAI,MAAM,CAAC,EAAE,QAAQ,EAAE,EAAE,IAAI,CAAC;AAEnD,MAAM,cAAc,CAAA,MAAO,IAAI,cAAc,MAAM,CAAC;AAEpD,MAAM,cAAc,CAAA,SAAU,IAAI,cAAc,MAAM,CAAC;AAEvD,MAAM,QAAQ,CAAA,SACnB,OAAO,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,MAAM;AAExD,MAAM,SAAS,YACpB;IAAC;IAAS;IAAW;IAAQ;IAAS;IAAU;IAAU;CAAQ,CAAC,GAAG,CAAC,CAAA,IAAK;QAC1E;QACA;KACD;AAGI,MAAM,YAAY,CAAC,QAAQ,UAAU,WAC1C,AAAC,CAAA,OAAO,SAAS,IAAI,QAAO,EAAG,KAAK,CAClC,GACA,OAAO,SAAS,GACZ,OAAO,SAAS,CAAC,MAAM,GACvB,OAAO,eAAe,IAAI;AAG3B,MAAM,QAAQ,CAAA,KAAM,IAAI,QAAQ,CAAA,MAAO,WAAW,KAAK;;;AC9E9D,kFAAkF;;AAClF,MAAM,sBAAsB;AAC5B,MAAM,sBAAsB;AAC5B,MAAM,0BAA0B;AAEhC,SAAS,YAAa,IAAI;IACxB,MAAM,QAAQ,IAAI,WAAW;IAC7B,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,IACxB,KAAK,CAAC,EAAE,GAAG,AAAC,KAAK,MAAM,KAAK,MAAO;IAErC,OAAO;AACT;AAEA,SAAS;IACP,IAAI,OAAO,eAAe,aAAa,OAAO;IAC9C,MAAM,OAAO;QACX,mBACE,WAAW,iBAAiB,IAC5B,WAAW,oBAAoB,IAC/B,WAAW,uBAAuB;QACpC,uBACE,WAAW,qBAAqB,IAChC,WAAW,wBAAwB,IACnC,WAAW,2BAA2B;QACxC,iBACE,WAAW,eAAe,IAC1B,WAAW,kBAAkB,IAC7B,WAAW,qBAAqB;IACpC;IACA,IAAI,CAAC,KAAK,iBAAiB,EAAE,OAAO;IACpC,OAAO;AACT;AAEA,SAAS,QAAS,GAAG,EAAE,IAAI;IACzB,OAAO,cAAc,CAAC,KAAK,QAAQ;QACjC,OAAO;QACP,YAAY;QACZ,cAAc;IAChB;IACA,OAAO;AACT;AAEA,2DAA2D;AAC3D,SAAS,cAAe,GAAG;IACzB,OAAO,IAAI,OAAO,CAAC,8BAA8B;AACnD;AAEA,SAAS,KAAM,OAAO;IACpB,QAAQ,IAAI,CAAC;AACf;AAEA;;;CAGC,GACD,MAAM;IACJ,YAAa,OAAO,CAAC,CAAC,CAAE;QACtB,IAAI,CAAC,IAAI,GAAG,IAAI,MAAM,oBAAoB;;QAE1C,IAAI,CAAC,GAAG,GAAG,YAAY,GAAG,QAAQ,CAAC,OAAO,KAAK,CAAC,GAAG;QACnD,IAAI,CAAC,QAAQ,GAAG,KAAK,KAAK;QAC1B,IAAI,CAAC,MAAM,CAAC,eAAe;QAE3B,IAAI,CAAC,WAAW,GAAG,KAAK,SAAS,GAC7B,KAAK,WAAW,IAAI,YAAY,IAAI,QAAQ,CAAC,SAC7C;QAEJ,IAAI,CAAC,SAAS,GAAG,KAAK,SAAS,IAAI;QACnC,IAAI,CAAC,aAAa,GAAG,KAAK,aAAa,IAAI,KAAK,aAAa;QAC7D,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU;QACtD,IAAI,CAAC,MAAM,GAAG,OAAO,MAAM,CAAC,CAAC,GAAG,KAAK,MAAM,EAAE,KAAK,MAAM;QACxD,IAAI,CAAC,YAAY,GAAG,KAAK,YAAY,IAAI,CAAC;QAC1C,IAAI,CAAC,aAAa,GAAG,KAAK,aAAa,IAAI,CAAC;QAC5C,IAAI,CAAC,YAAY,GAAG,KAAK,YAAY,IAAK,CAAA,CAAA,MAAO,GAAE;QACnD,IAAI,CAAC,OAAO,GAAG,KAAK,OAAO,IAAK,CAAA,KAAK,MAAM,GAAG;YAAC,KAAK,MAAM;SAAC,GAAG,EAAE,CAAE,8BAA8B;QAAjC;QAC/D,IAAI,CAAC,OAAO,GAAG,KAAK,OAAO,KAAK,YAAY,KAAK,OAAO,GAAG;QAC3D,IAAI,CAAC,gBAAgB,GACnB,KAAK,gBAAgB,KAAK,YAAY,KAAK,gBAAgB,GAAG;QAChE,IAAI,CAAC,kBAAkB,GAAG,KAAK,kBAAkB,IAAI;QAErD,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,UAAU,GAAG;QAElB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,YAAY,GAAG;QACpB,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,YAAY,GAAG;QACpB,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,SAAS,GAAG;QAEjB,IAAI,CAAC,KAAK,GACR,KAAK,IAAI,IAAI,OAAO,KAAK,IAAI,KAAK,WAAW,KAAK,IAAI,GAAG;QAE3D,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACf,IAAI,OAAO,WAAW,aACpB,MAAM,QACJ,IAAI,MACF,sEAEF;iBAGF,MAAM,QACJ,IAAI,MAAM,+CACV;QAGN;QAEA,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,YAAY,GAAG,MAAM,kDAAkD;;QAC5E,IAAI,CAAC,iBAAiB,GAAG,KAAK,iDAAiD;;QAC/E,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,kBAAkB,GAAG,EAAE;QAE5B,IAAI,CAAC,cAAc,GAAG,MAAM,oDAAoD;;QAChF,IAAI,CAAC,iBAAiB,GAAG;QACzB,IAAI,CAAC,mBAAmB,GAAG,MAAM,iCAAiC;;QAClE,IAAI,CAAC,kBAAkB,GAAG,MAAM,yCAAyC;;QACzE,IAAI,CAAC,sBAAsB,GAAG,EAAE;QAChC,IAAI,CAAC,UAAU,GAAG,IAAI;QACtB,IAAI,CAAC,gBAAgB,GAAG;QAExB,IAAI,CAAC,aAAa,GAAG,EAAE;QACvB,IAAI,CAAC,cAAc,GAAG,EAAE;QAExB,IAAI,CAAC,MAAM,GAAG;QACd,IAAI,CAAC,GAAG,GAAG;QACX,IAAI,CAAC,SAAS,GAAG;QAEjB,IAAI;YACF,IAAI,CAAC,GAAG,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM;QACzD,EAAE,OAAO,KAAK;YACZ,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;YAC1B;QACF;QAEA,0EAA0E;QAC1E,wCAAwC;QACxC,IAAI,CAAC,oBAAoB,GAAG,OAAO,IAAI,CAAC,GAAG,CAAC,iBAAiB,KAAK;QAElE,IAAI,CAAC,GAAG,CAAC,0BAA0B,GAAG;YACpC,IAAI,CAAC,iBAAiB;QACxB;QACA,IAAI,CAAC,GAAG,CAAC,yBAAyB,GAAG;YACnC,IAAI,CAAC,iBAAiB;QACxB;QACA,IAAI,CAAC,GAAG,CAAC,uBAAuB,GAAG;YACjC,IAAI,CAAC,wBAAwB;QAC/B;QACA,IAAI,CAAC,GAAG,CAAC,sBAAsB,GAAG;YAChC,IAAI,CAAC,uBAAuB;QAC9B;QACA,IAAI,CAAC,GAAG,CAAC,cAAc,GAAG,CAAA;YACxB,IAAI,CAAC,eAAe,CAAC;QACvB;QAEA,0FAA0F;QAC1F,IAAI,OAAO,IAAI,CAAC,GAAG,CAAC,YAAY,KAAK,UACnC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,CAAA;YAC1B,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;QAC5B;QAGF,oDAAoD;QACpD,4BAA4B;QAC5B,wBAAwB;QACxB,yBAAyB;QACzB,wBAAwB;QAExB,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,iBAAiB,EAC1C,IAAI,CAAC,UAAU,CAAC;YACd,SAAS,IAAI,CAAC,GAAG,CAAC,iBAAiB,CACjC,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,aAAa;QAEtB;aAEA,IAAI,CAAC,GAAG,CAAC,aAAa,GAAG,CAAA;YACvB,IAAI,CAAC,UAAU,CAAC;QAClB;QAGF,IAAI,IAAI,CAAC,OAAO,EACd,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAA;YACnB,IAAI,CAAC,SAAS,CAAC;QACjB;QAEF,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,CAAA;YACjB,IAAI,CAAC,QAAQ,CAAC;QAChB;QAEA,IAAI,CAAC,MAAM,CAAC;QACZ,IAAI,CAAC,iBAAiB;IACxB;IAEA,IAAI,aAAc;QAChB,OAAO,AAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,cAAc,IAAK;IAC5D;IAEA,kFAAkF;IAClF,+DAA+D;IAC/D,IAAI,YAAa;QACf,OAAO,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,KAAK;IACzD;IAEA,UAAW;QACT,OAAO;YACL,MAAM,IAAI,CAAC,SAAS;YACpB,QAAQ,IAAI,CAAC,WAAW;YACxB,SAAS,IAAI,CAAC,YAAY;QAC5B;IACF;IAEA,OAAQ,IAAI,EAAE;QACZ,IAAI,IAAI,CAAC,UAAU,EAAE;QACrB,IAAI,IAAI,CAAC,SAAS,EAAE,MAAM,QAAQ,IAAI,MAAM,0CAA0C;QACtF,IAAI,OAAO,SAAS,UAClB,IAAI;YACF,OAAO,KAAK,KAAK,CAAC;QACpB,EAAE,OAAO,KAAK;YACZ,OAAO,CAAC;QACV;QAEF,IAAI,CAAC,MAAM,CAAC;QAEZ,IAAI,KAAK,WAAW,IAAI,IAAI,CAAC,SAAS,EAAE;YACtC,IAAI,CAAC,MAAM,CAAC;YACZ,IAAI,CAAC,iBAAiB;QACxB;QACA,IAAI,KAAK,kBAAkB,IAAI,IAAI,CAAC,SAAS,EAAE;YAC7C,IAAI,CAAC,MAAM,CAAC;YACZ,IAAI,CAAC,cAAc,CACjB,KAAK,kBAAkB,CAAC,IAAI,EAC5B,KAAK,kBAAkB,CAAC,IAAI;QAEhC;QACA,IAAI,KAAK,SAAS;YAChB,IAAI,IAAI,CAAC,GAAG,CAAC,iBAAiB,IAAI,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,EAC/D,IAAI,CAAC,gBAAgB,CAAC,KAAK,SAAS;iBAEpC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,SAAS;;QAG/C,IAAI,KAAK,GAAG,EACV,IAAI,CAAC,GAAG,CACL,oBAAoB,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,OAC1D,IAAI,CAAC;YACJ,IAAI,IAAI,CAAC,SAAS,EAAE;YAEpB,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAA;gBAC9B,IAAI,CAAC,gBAAgB,CAAC;YACxB;YACA,IAAI,CAAC,kBAAkB,GAAG,EAAE;YAE5B,IAAI,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,KAAK,SAAS,IAAI,CAAC,aAAa;QACrE,GACC,KAAK,CAAC,CAAA;YACL,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;QAC5B;QAEJ,IACE,CAAC,KAAK,GAAG,IACT,CAAC,KAAK,SAAS,IACf,CAAC,KAAK,WAAW,IACjB,CAAC,KAAK,kBAAkB,EAExB,IAAI,CAAC,OAAO,CACV,QACE,IAAI,MAAM,6CACV;IAIR;IAEA,iBAAkB,SAAS,EAAE;QAC3B,MAAM,kBAAkB,IAAI,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC;QACvD,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,iBAAiB,KAAK,CAAC,CAAA;YAC9C,IACE,CAAC,gBAAgB,OAAO,IACxB,gBAAgB,OAAO,CAAC,QAAQ,CAAC,WAEjC,KAAK;iBAEL,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;QAE9B;IACF;IAEA;;;GAGC,GACD,KAAM,KAAK,EAAE;QACX,IAAI,IAAI,CAAC,UAAU,EAAE;QACrB,IAAI,IAAI,CAAC,SAAS,EAAE,MAAM,QAAQ,IAAI,MAAM,wCAAwC;QACpF,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;IACrB;IAEA;;;;GAIC,GACD,eAAgB,IAAI,EAAE,IAAI,EAAE;QAC1B,IAAI,IAAI,CAAC,UAAU,EAAE;QACrB,IAAI,IAAI,CAAC,SAAS,EAAE,MAAM,QAAQ,IAAI,MAAM,kDAAkD;QAC9F,IAAI,CAAC,MAAM,CAAC;QAEZ,IAAI,IAAI,CAAC,SAAS,EAChB,IAAI;YACF,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,MAAM;YAC9B,IAAI,CAAC,iBAAiB;QACxB,EAAE,OAAO,KAAK;YACZ,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;QAC5B;aAEA,IAAI,CAAC,IAAI,CAAC,UAAU;YAClB,mCAAmC;YACnC,MAAM;YACN,oBAAoB;gBAAE;gBAAM;YAAK;QACnC;IAEJ;IAEA;;;GAGC,GACD,UAAW,MAAM,EAAE;QACjB,IAAI,IAAI,CAAC,UAAU,EAAE;QACrB,IAAI,IAAI,CAAC,SAAS,EAAE,MAAM,QAAQ,IAAI,MAAM,6CAA6C;QACzF,IAAI,CAAC,MAAM,CAAC;QAEZ,OAAO,SAAS,GAAG,OAAO,CAAC,CAAA;YACzB,IAAI,CAAC,QAAQ,CAAC,OAAO;QACvB;IACF;IAEA;;;;GAIC,GACD,SAAU,KAAK,EAAE,MAAM,EAAE;QACvB,IAAI,IAAI,CAAC,UAAU,EAAE;QACrB,IAAI,IAAI,CAAC,SAAS,EAAE,MAAM,QAAQ,IAAI,MAAM,4CAA4C;QACxF,IAAI,CAAC,MAAM,CAAC;QAEZ,MAAM,SAAS,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,IAAI,MAAM,4CAA4C;;QACnG,IAAI,SAAS,OAAO,GAAG,CAAC;QACxB,IAAI,CAAC,QAAQ;YACX,SAAS,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,OAAO;YAClC,OAAO,GAAG,CAAC,QAAQ;YACnB,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO;YAC3B,IAAI,CAAC,iBAAiB;QACxB,OAAO,IAAI,OAAO,OAAO,EACvB,MAAM,QACJ,IAAI,MACF,sFAEF;aAGF,MAAM,QACJ,IAAI,MAAM,iDACV;IAGN;IAEA;;;;;GAKC,GACD,aAAc,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE;QACxC,IAAI,IAAI,CAAC,UAAU,EAAE;QACrB,IAAI,IAAI,CAAC,SAAS,EAAE,MAAM,QAAQ,IAAI,MAAM,gDAAgD;QAC5F,IAAI,CAAC,MAAM,CAAC;QAEZ,MAAM,SAAS,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC;QACnC,MAAM,SAAS,SAAS,OAAO,GAAG,CAAC,UAAU;QAC7C,IAAI,CAAC,QACH,MAAM,QACJ,IAAI,MAAM,+CACV;QAGJ,IAAI,UAAU,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU;QAE5C,IAAI,OAAO,YAAY,IAAI,MACzB,OAAO,YAAY,CAAC;aAEpB,IAAI,CAAC,OAAO,CACV,QACE,IAAI,MAAM,kDACV;IAIR;IAEA;;;;GAIC,GACD,YAAa,KAAK,EAAE,MAAM,EAAE;QAC1B,IAAI,IAAI,CAAC,UAAU,EAAE;QACrB,IAAI,IAAI,CAAC,SAAS,EAAE,MAAM,QAAQ,IAAI,MAAM,+CAA+C;QAC3F,IAAI,CAAC,MAAM,CAAC;QAEZ,MAAM,SAAS,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC;QACnC,MAAM,SAAS,SAAS,OAAO,GAAG,CAAC,UAAU;QAC7C,IAAI,CAAC,QACH,MAAM,QACJ,IAAI,MAAM,8CACV;QAGJ,IAAI;YACF,OAAO,OAAO,GAAG;YACjB,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC;QACvB,EAAE,OAAO,KAAK;YACZ,IAAI,IAAI,IAAI,KAAK,uBACf,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,iHAAiH;;iBAE1J,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;QAE9B;QACA,IAAI,CAAC,iBAAiB;IACxB;IAEA;;;GAGC,GACD,aAAc,MAAM,EAAE;QACpB,IAAI,IAAI,CAAC,UAAU,EAAE;QACrB,IAAI,IAAI,CAAC,SAAS,EAAE,MAAM,QAAQ,IAAI,MAAM,gDAAgD;QAC5F,IAAI,CAAC,MAAM,CAAC;QAEZ,OAAO,SAAS,GAAG,OAAO,CAAC,CAAA;YACzB,IAAI,CAAC,WAAW,CAAC,OAAO;QAC1B;IACF;IAEA,oBAAqB;QACnB,IAAI,CAAC,MAAM,CAAC;QACZ,IAAI,IAAI,CAAC,mBAAmB,EAAE,QAAO,mCAAmC;QACxE,IAAI,CAAC,mBAAmB,GAAG;QAC3B,eAAe;YACb,IAAI,CAAC,mBAAmB,GAAG;YAC3B,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;gBAC7C,IAAI,CAAC,MAAM,CAAC;gBACZ,IAAI,CAAC,SAAS;YAChB,OACE,IAAI,CAAC,MAAM,CAAC;YAEd,IAAI,CAAC,iBAAiB,GAAG;QAC3B;IACF;IAEA,YAAa;QACX,IAAI,IAAI,CAAC,UAAU,EAAE;QACrB,IAAI,IAAI,CAAC,SAAS,EAAE,MAAM,QAAQ,IAAI,MAAM,6CAA6C;QAEzF,IAAI,IAAI,CAAC,SAAS;YAChB,IAAI,IAAI,CAAC,cAAc,EAAE;gBACvB,IAAI,CAAC,kBAAkB,GAAG;gBAC1B,IAAI,CAAC,MAAM,CAAC;YACd,OAAO;gBACL,IAAI,CAAC,MAAM,CAAC;gBACZ,WAAW;oBACT,0DAA0D;oBAC1D,IAAI,CAAC,YAAY;gBACnB,GAAG;YACL;eAEA,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,kBAAkB,GAAG;YAC1B,IAAI,CAAC,MAAM,CAAC;QACd,OAAO;YACL,IAAI,CAAC,MAAM,CAAC;YACZ,IAAI,CAAC,IAAI,CAAC,UAAU;gBAClB,mCAAmC;gBACnC,MAAM;gBACN,aAAa;YACf;QACF;QAEF,IAAI,CAAC,cAAc,GAAG;IACxB;IAEA,QAAS,GAAG,EAAE;QACZ,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,UAAU,EAAE;QACvC,IAAI,CAAC,UAAU,GAAG;QAElB,IAAI,CAAC,MAAM,CAAC,0BAA0B,OAAQ,CAAA,IAAI,OAAO,IAAI,GAAE;QAE/D,eAAe;YACb,yEAAyE;YACzE,IAAI,CAAC,SAAS,GAAG;YACjB,IAAI,CAAC,UAAU,GAAG;YAElB,IAAI,CAAC,MAAM,CAAC,uBAAuB,OAAQ,CAAA,IAAI,OAAO,IAAI,GAAE;YAE5D,IAAI,CAAC,UAAU,GAAG;YAClB,IAAI,CAAC,QAAQ,GAAG;YAChB,IAAI,CAAC,aAAa,GAAG;YACrB,IAAI,CAAC,aAAa,GAAG;YACrB,IAAI,CAAC,cAAc,GAAG;YACtB,IAAI,CAAC,UAAU,GAAG;YAElB,cAAc,IAAI,CAAC,gBAAgB;YACnC,IAAI,CAAC,gBAAgB,GAAG;YAExB,cAAc,IAAI,CAAC,SAAS;YAC5B,IAAI,CAAC,SAAS,GAAG;YACjB,IAAI,CAAC,MAAM,GAAG;YACd,IAAI,CAAC,GAAG,GAAG;YAEX,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAI;oBACF,IAAI,CAAC,QAAQ,CAAC,KAAK;gBACrB,EAAE,OAAO,KAAK,CAAC;gBAEf,yDAAyD;gBACzD,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG;gBAC1B,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG;gBACvB,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG;gBACxB,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG;YAC1B;YACA,IAAI,IAAI,CAAC,GAAG,EAAE;gBACZ,IAAI;oBACF,IAAI,CAAC,GAAG,CAAC,KAAK;gBAChB,EAAE,OAAO,KAAK,CAAC;gBAEf,yDAAyD;gBACzD,IAAI,CAAC,GAAG,CAAC,0BAA0B,GAAG;gBACtC,IAAI,CAAC,GAAG,CAAC,yBAAyB,GAAG;gBACrC,IAAI,CAAC,GAAG,CAAC,sBAAsB,GAAG;gBAClC,IAAI,CAAC,GAAG,CAAC,cAAc,GAAG;gBAC1B,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG;gBACnB,IAAI,CAAC,GAAG,CAAC,aAAa,GAAG;YAC3B;YACA,IAAI,CAAC,GAAG,GAAG;YACX,IAAI,CAAC,QAAQ,GAAG;YAEhB,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,SAAS;YAC5B,IAAI,CAAC,IAAI,CAAC;QACZ;IACF;IAEA,WAAY,KAAK,EAAE;QACjB,IAAI,CAAC,MAAM,OAAO,EAChB,6EAA6E;QAC7E,mDAAmD;QACnD,wDAAwD;QACxD,OAAO,IAAI,CAAC,OAAO,CACjB,QACE,IAAI,MAAM,qDACV;QAKN,IAAI,CAAC,QAAQ,GAAG,MAAM,OAAO;QAC7B,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG;QAE3B,IAAI,OAAO,IAAI,CAAC,QAAQ,CAAC,0BAA0B,KAAK,UACtD,IAAI,CAAC,QAAQ,CAAC,0BAA0B,GAAG;QAG7C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK;QAEtC,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,CAAA;YACxB,IAAI,CAAC,iBAAiB,CAAC;QACzB;QACA,IAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG;YAClC,IAAI,CAAC,2BAA2B;QAClC;QACA,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG;YACrB,IAAI,CAAC,cAAc;QACrB;QACA,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG;YACtB,IAAI,CAAC,eAAe;QACtB;QACA,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAA;YACtB,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;QAC5B;QAEA,gGAAgG;QAChG,+DAA+D;QAC/D,IAAI,YAAY;QAChB,IAAI,CAAC,gBAAgB,GAAG,YAAY;YAClC,uBAAuB;YACvB,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,KAAK,WAAW;gBAC3D,IAAI,WAAW,IAAI,CAAC,eAAe,GAAG,kDAAkD;;gBACxF,YAAY;YACd,OACE,YAAY;QAEhB,GAAG;IACL;IAEA,2BAA4B;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE;QACpB,IAAI,IAAI,CAAC,iBAAiB,EAAE;QAC5B,IAAI,CAAC,MAAM,CAAC;QACZ,IAAI,CAAC,iBAAiB,GAAG,WAAW;YAClC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACtB,IAAI,CAAC,YAAY,GAAG;gBACpB,IAAI,CAAC,MAAM,CAAC;gBACZ,IAAI,CAAC,IAAI,CAAC;gBACV,IAAI,CAAC,IAAI,CAAC;YACZ;QACF,GAAG,IAAI,CAAC,kBAAkB;IAC5B;IAEA,eAAgB;QACd,IAAI,IAAI,CAAC,SAAS,EAAE;QAEpB,IAAI,CAAC,GAAG,CACL,WAAW,CAAC,IAAI,CAAC,YAAY,EAC7B,IAAI,CAAC,CAAA;YACJ,IAAI,IAAI,CAAC,SAAS,EAAE;YACpB,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAI,MAAM,GAAG,GAAG,cAAc,MAAM,GAAG;YAClF,MAAM,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG;YAEvC,MAAM,YAAY;gBAChB,IAAI,IAAI,CAAC,SAAS,EAAE;gBACpB,MAAM,SAAS,IAAI,CAAC,GAAG,CAAC,gBAAgB,IAAI;gBAC5C,IAAI,CAAC,MAAM,CAAC;gBACZ,IAAI,CAAC,IAAI,CAAC,UAAU;oBAClB,MAAM,OAAO,IAAI;oBACjB,KAAK,OAAO,GAAG;gBACjB;YACF;YAEA,MAAM,YAAY;gBAChB,IAAI,CAAC,MAAM,CAAC;gBACZ,IAAI,IAAI,CAAC,SAAS,EAAE;gBACpB,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,YAAY,EAAE;qBAClC,IAAI,CAAC,IAAI,CAAC,gBAAgB,WAAW,sBAAsB;;YAClE;YAEA,MAAM,UAAU,CAAA;gBACd,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;YAC5B;YAEA,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,OAAO,IAAI,CAAC,WAAW,KAAK,CAAC;QAC5D,GACC,KAAK,CAAC,CAAA;YACL,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;QAC5B;IACJ;IAEA,8BAA+B;QAC7B,IAAI,IAAI,CAAC,GAAG,CAAC,eAAe,EAC1B,IAAI,CAAC,GAAG,CAAC,eAAe,GAAG,OAAO,CAAC,CAAA;YACjC,IACE,CAAC,YAAY,GAAG,IAChB,YAAY,MAAM,CAAC,KAAK,IACxB,CAAC,YAAY,SAAS,EACtB;gBACA,YAAY,SAAS,GAAG,KAAK,+DAA+D;;gBAC5F,IAAI,CAAC,cAAc,CAAC,YAAY,MAAM,CAAC,KAAK,CAAC,IAAI;YACnD;QACF;IAEJ;IAEA,gBAAiB;QACf,IAAI,IAAI,CAAC,SAAS,EAAE;QAEpB,IAAI,CAAC,GAAG,CACL,YAAY,CAAC,IAAI,CAAC,aAAa,EAC/B,IAAI,CAAC,CAAA;YACJ,IAAI,IAAI,CAAC,SAAS,EAAE;YACpB,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAI,OAAO,GAAG,GAAG,cAAc,OAAO,GAAG;YACpF,OAAO,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,GAAG;YAEzC,MAAM,aAAa;gBACjB,IAAI,IAAI,CAAC,SAAS,EAAE;gBACpB,MAAM,SAAS,IAAI,CAAC,GAAG,CAAC,gBAAgB,IAAI;gBAC5C,IAAI,CAAC,MAAM,CAAC;gBACZ,IAAI,CAAC,IAAI,CAAC,UAAU;oBAClB,MAAM,OAAO,IAAI;oBACjB,KAAK,OAAO,GAAG;gBACjB;gBACA,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,2BAA2B;YACvD;YAEA,MAAM,YAAY;gBAChB,IAAI,IAAI,CAAC,SAAS,EAAE;gBACpB,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,YAAY,EAAE;qBAClC,IAAI,CAAC,IAAI,CAAC,gBAAgB;YACjC;YAEA,MAAM,UAAU,CAAA;gBACd,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;YAC5B;YAEA,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,QAAQ,IAAI,CAAC,WAAW,KAAK,CAAC;QAC7D,GACC,KAAK,CAAC,CAAA;YACL,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;QAC5B;IACJ;IAEA,2BAA4B;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE;QACpB,IAAI,IAAI,CAAC,GAAG,CAAC,eAAe,KAAK,UAC/B,IAAI,CAAC,OAAO,CACV,QAAQ,IAAI,MAAM,uBAAuB;IAG/C;IAEA,oBAAqB;QACnB,IAAI,IAAI,CAAC,SAAS,EAAE;QACpB,MAAM,qBAAqB,IAAI,CAAC,GAAG,CAAC,kBAAkB;QACtD,MAAM,oBAAoB,IAAI,CAAC,GAAG,CAAC,iBAAiB;QAEpD,IAAI,CAAC,MAAM,CACT,mDACA,oBACA;QAEF,IAAI,CAAC,IAAI,CAAC,kBAAkB,oBAAoB;QAEhD,IACE,uBAAuB,eACvB,uBAAuB,aACvB;YACA,IAAI,CAAC,QAAQ,GAAG;YAChB,IAAI,CAAC,WAAW;QAClB;QACA,IAAI,uBAAuB,UACzB,IAAI,CAAC,OAAO,CACV,QACE,IAAI,MAAM,2BACV;QAIN,IAAI,uBAAuB,UACzB,IAAI,CAAC,OAAO,CACV,QACE,IAAI,MAAM,2BACV;IAIR;IAEA,SAAU,EAAE,EAAE;QACZ,gEAAgE;QAChE,MAAM,gBAAgB,CAAA;YACpB,IAAI,OAAO,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,MAAM,MAAM,kBACpD,OAAO,MAAM,CAAC,OAAO,CAAC,CAAA;gBACpB,OAAO,MAAM,CAAC,QAAQ;YACxB;YAEF,OAAO;QACT;QAEA,sCAAsC;QACtC,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,KAAK,KAAK,IAAI,CAAC,oBAAoB,EAC7D,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CACtB,CAAA;YACE,MAAM,UAAU,EAAE;YAClB,IAAI,OAAO,CAAC,CAAA;gBACV,QAAQ,IAAI,CAAC,cAAc;YAC7B;YACA,GAAG,MAAM;QACX,GACA,CAAA,MAAO,GAAG;aAIP,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,GAAG,GACpC,IAAI,CAAC,GAAG,CAAC,QAAQ,CACf,CAAA;YACE,wHAAwH;YACxH,IAAI,IAAI,CAAC,SAAS,EAAE;YAEpB,MAAM,UAAU,EAAE;YAClB,IAAI,MAAM,GAAG,OAAO,CAAC,CAAA;gBACnB,MAAM,SAAS,CAAC;gBAChB,OAAO,KAAK,GAAG,OAAO,CAAC,CAAA;oBACrB,MAAM,CAAC,KAAK,GAAG,OAAO,IAAI,CAAC;gBAC7B;gBACA,OAAO,EAAE,GAAG,OAAO,EAAE;gBACrB,OAAO,IAAI,GAAG,OAAO,IAAI;gBACzB,OAAO,SAAS,GAAG,OAAO,SAAS;gBACnC,QAAQ,IAAI,CAAC,cAAc;YAC7B;YACA,GAAG,MAAM;QACX,GACA,CAAA,MAAO,GAAG;aAMZ,GAAG,MAAM,EAAE;IAEf;IAEA,cAAe;QACb,IAAI,CAAC,MAAM,CACT,+BACA,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,aAAa;QAEpB,IACE,IAAI,CAAC,UAAU,IACf,IAAI,CAAC,WAAW,IAChB,CAAC,IAAI,CAAC,QAAQ,IACd,CAAC,IAAI,CAAC,aAAa,EACjB;QAEJ,IAAI,CAAC,WAAW,GAAG;QAEnB,2GAA2G;QAC3G,MAAM,oBAAoB;YACxB,IAAI,IAAI,CAAC,SAAS,EAAE;YAEpB,IAAI,CAAC,QAAQ,CAAC,CAAC,KAAK;gBAClB,IAAI,IAAI,CAAC,SAAS,EAAE;gBAEpB,yDAAyD;gBACzD,IAAI,KAAK,QAAQ,EAAE;gBAEnB,MAAM,mBAAmB,CAAC;gBAC1B,MAAM,kBAAkB,CAAC;gBACzB,MAAM,iBAAiB,CAAC;gBACxB,IAAI,6BAA6B;gBAEjC,MAAM,OAAO,CAAC,CAAA;oBACZ,4EAA4E;oBAC5E,yBAAyB;oBACzB,IACE,KAAK,IAAI,KAAK,qBACd,KAAK,IAAI,KAAK,oBAEd,gBAAgB,CAAC,KAAK,EAAE,CAAC,GAAG;oBAE9B,IACE,KAAK,IAAI,KAAK,oBACd,KAAK,IAAI,KAAK,mBAEd,eAAe,CAAC,KAAK,EAAE,CAAC,GAAG;oBAE7B,IAAI,KAAK,IAAI,KAAK,mBAAmB,KAAK,IAAI,KAAK,kBACjD,cAAc,CAAC,KAAK,EAAE,CAAC,GAAG;gBAE9B;gBAEA,MAAM,2BAA2B,CAAA;oBAC/B,6BAA6B;oBAE7B,IAAI,QAAQ,eAAe,CAAC,sBAAsB,gBAAgB,CAAC;oBAEnE,IAAI,SAAU,CAAA,MAAM,EAAE,IAAI,MAAM,OAAO,AAAD,GAAI;wBACxC,OAAO;wBACP,IAAI,CAAC,YAAY,GAAG,MAAM,EAAE,IAAI,MAAM,OAAO;wBAC7C,IAAI,CAAC,SAAS,GAAG,OAAO,MAAM,IAAI;oBACpC,OAAO,IAAI,SAAS,MAAM,SAAS,EAAE;wBACnC,UAAU;wBACV,IAAI,CAAC,YAAY,GAAG,MAAM,SAAS;wBACnC,IAAI,CAAC,SAAS,GAAG,OAAO,MAAM,UAAU;oBAC1C,OAAO,IACL,OAAO,sBAAsB,gBAAgB,KAAK,UAClD;wBACA,+CAA+C;wBAC/C,QAAQ,sBAAsB,gBAAgB,CAAC,KAAK,CAAC;wBACrD,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,EAAE;wBAC5B,IAAI,CAAC,SAAS,GAAG,OAAO,KAAK,CAAC,EAAE;oBAClC;oBACA,IAAI,IAAI,CAAC,YAAY,EACnB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,OAC1C,SACA;oBAGN,IAAI,SACF,gBAAgB,CAAC,sBAAsB,iBAAiB,CAAC;oBAE3D,IAAI,UAAW,CAAA,OAAO,EAAE,IAAI,OAAO,OAAO,AAAD,GAAI;wBAC3C,OAAO;wBACP,IAAI,CAAC,aAAa,GAAG,OAAO,EAAE,IAAI,OAAO,OAAO;wBAChD,IAAI,CAAC,UAAU,GAAG,OAAO,OAAO,IAAI;oBACtC,OAAO,IAAI,UAAU,OAAO,SAAS,EAAE;wBACrC,UAAU;wBACV,IAAI,CAAC,aAAa,GAAG,OAAO,SAAS;wBACrC,IAAI,CAAC,UAAU,GAAG,OAAO,OAAO,UAAU;oBAC5C,OAAO,IACL,OAAO,sBAAsB,iBAAiB,KAAK,UACnD;wBACA,+CAA+C;wBAC/C,SAAS,sBAAsB,iBAAiB,CAAC,KAAK,CAAC;wBACvD,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,EAAE;wBAC9B,IAAI,CAAC,UAAU,GAAG,OAAO,MAAM,CAAC,EAAE;oBACpC;oBACA,IAAI,IAAI,CAAC,aAAa,EACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,OAC5C,SACA;oBAGN,IAAI,CAAC,MAAM,CACT,sCACA,IAAI,CAAC,YAAY,EACjB,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,UAAU;gBAEnB;gBAEA,MAAM,OAAO,CAAC,CAAA;oBACZ,iBAAiB;oBACjB,IAAI,KAAK,IAAI,KAAK,eAAe,KAAK,uBAAuB,EAC3D,yBACE,cAAc,CAAC,KAAK,uBAAuB,CAAC;oBAIhD,sBAAsB;oBACtB,IACE,AAAC,KAAK,IAAI,KAAK,uBACb,KAAK,oBAAoB,KAAK,UAC/B,AAAC,CAAA,KAAK,IAAI,KAAK,mBACd,KAAK,IAAI,KAAK,gBAAe,KAC7B,KAAK,QAAQ,EAEf,yBAAyB;gBAE7B;gBAEA,6GAA6G;gBAC7G,wDAAwD;gBACxD,IACE,CAAC,8BACA,CAAA,CAAC,OAAO,IAAI,CAAC,gBAAgB,MAAM,IAClC,OAAO,IAAI,CAAC,iBAAiB,MAAM,AAAD,GACpC;oBACA,WAAW,mBAAmB;oBAC9B;gBACF,OAAO;oBACL,IAAI,CAAC,WAAW,GAAG;oBACnB,IAAI,CAAC,UAAU,GAAG;gBACpB;gBAEA,IAAI,IAAI,CAAC,MAAM,EAAE;oBACf,IAAI;wBACF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM;oBACvB,EAAE,OAAO,KAAK;wBACZ,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK;oBACnC;oBACA,IAAI,CAAC,MAAM,GAAG;oBACd,IAAI,CAAC,MAAM,CAAC;oBAEZ,MAAM,KAAK,IAAI,CAAC,GAAG;oBACnB,IAAI,CAAC,GAAG,GAAG;oBACX,GAAG;gBACL;gBAEA,6EAA6E;gBAC7E,2DAA2D;gBAC3D,IAAI,OAAO,IAAI,CAAC,QAAQ,CAAC,0BAA0B,KAAK,UAAU;oBAChE,IAAI,CAAC,SAAS,GAAG,YAAY,IAAM,IAAI,CAAC,WAAW,IAAI;oBACvD,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK;gBAChD;gBAEA,IAAI,CAAC,MAAM,CAAC;gBACZ,IAAI,CAAC,IAAI,CAAC;YACZ;QACF;QACA;IACF;IAEA,cAAe;QACb,IACE,CAAC,IAAI,CAAC,GAAG,IACT,CAAC,IAAI,CAAC,QAAQ,IACd,IAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,qBAE/B;QAEF,IAAI,CAAC,2BAA2B;IAClC;IAEA,0BAA2B;QACzB,IAAI,IAAI,CAAC,SAAS,EAAE;QAEpB,IAAI,IAAI,CAAC,GAAG,CAAC,cAAc,KAAK,UAAU;YACxC,IAAI,CAAC,cAAc,GAAG;YAEtB,qFAAqF;YACrF,IAAI,CAAC,MAAM,CAAC,yBAAyB,IAAI,CAAC,sBAAsB;YAChE,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAA;gBAClC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC;gBACrB,IAAI,CAAC,kBAAkB,GAAG;YAC5B;YACA,IAAI,CAAC,sBAAsB,GAAG,EAAE;YAEhC,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBAC3B,IAAI,CAAC,MAAM,CAAC;gBACZ,IAAI,CAAC,kBAAkB,GAAG;gBAC1B,IAAI,CAAC,iBAAiB,GAAG,kBAAkB;;YAC7C,OAAO;gBACL,IAAI,CAAC,MAAM,CAAC;gBACZ,IAAI,CAAC,IAAI,CAAC;YACZ;QACF;QAEA,IAAI,CAAC,MAAM,CAAC,2BAA2B,IAAI,CAAC,GAAG,CAAC,cAAc;QAC9D,IAAI,CAAC,IAAI,CAAC,wBAAwB,IAAI,CAAC,GAAG,CAAC,cAAc;IAC3D;IAEA,gBAAiB,KAAK,EAAE;QACtB,IAAI,IAAI,CAAC,SAAS,EAAE;QACpB,IAAI,MAAM,SAAS,IAAI,IAAI,CAAC,OAAO,EACjC,IAAI,CAAC,IAAI,CAAC,UAAU;YAClB,MAAM;YACN,WAAW;gBACT,WAAW,MAAM,SAAS,CAAC,SAAS;gBACpC,eAAe,MAAM,SAAS,CAAC,aAAa;gBAC5C,QAAQ,MAAM,SAAS,CAAC,MAAM;YAChC;QACF;aACK,IAAI,CAAC,MAAM,SAAS,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACjD,IAAI,CAAC,YAAY,GAAG;YACpB,IAAI,CAAC,IAAI,CAAC;QACZ;QACA,8DAA8D;QAC9D,IAAI,MAAM,SAAS,EACjB,IAAI,CAAC,wBAAwB;IAEjC;IAEA,kBAAmB,KAAK,EAAE;QACxB,IAAI,IAAI,CAAC,SAAS,EAAE;QACpB,IAAI,OAAO,MAAM,IAAI;QACrB,IAAI,gBAAgB,aAAa,OAAO,IAAI,WAAW;QACvD,IAAI,CAAC,IAAI,CAAC,QAAQ;IACpB;IAEA,8BAA+B;QAC7B,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;QACjC,IAAI,CAAC,MAAM,CACT,0CACA,IAAI,CAAC,QAAQ,CAAC,cAAc;QAE9B,MAAM,KAAK,IAAI,CAAC,GAAG;QACnB,IAAI,CAAC,GAAG,GAAG;QACX,GAAG;IACL;IAEA,iBAAkB;QAChB,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,SAAS,EAAE;QACvC,IAAI,CAAC,MAAM,CAAC;QACZ,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,WAAW;IAClB;IAEA,kBAAmB;QACjB,IAAI,IAAI,CAAC,SAAS,EAAE;QACpB,IAAI,CAAC,MAAM,CAAC;QACZ,IAAI,CAAC,OAAO;IACd;IAEA,SAAU,KAAK,EAAE;QACf,IAAI,IAAI,CAAC,SAAS,EAAE;QAEpB,MAAM,OAAO,CAAC,OAAO,CAAC,CAAA;YACpB,IAAI,CAAC,MAAM,CAAC;YACZ,IAAI,CAAC,IAAI,CAAC,SAAS,MAAM,KAAK,EAAE;YAEhC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;gBACtB,OAAO,MAAM,KAAK;gBAClB,QAAQ;YACV;YAEA,IACE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAA;gBACvB,OAAO,aAAa,EAAE,KAAK,YAAY,EAAE;YAC3C,IACE;aAAS,oFAAoF;YAEjG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;YACzB,eAAe;gBACb,IAAI,CAAC,MAAM,CAAC;gBACZ,IAAI,CAAC,IAAI,CAAC,UAAU,aAAa,oCAAoC;;YACvE;QACF;IACF;IAEA,OAAQ,GAAG,IAAI,EAAE;QACf,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;QACpB,IAAI,CAAC,EAAE,GAAG,MAAM,IAAI,CAAC,GAAG,GAAG,OAAO,IAAI,CAAC,EAAE;QACzC,QAAQ,GAAG,IAAI;IACjB;IAEA,gBAAgB;IAChB,GAAI,GAAG,EAAE,QAAQ,EAAE;QACjB,MAAM,MAAM,IAAI,CAAC,IAAI;QACrB,IAAI,CAAC,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,KAAK,IAAI;QACpC,IAAI,GAAG,CAAC,KAAK,GAAG,CAAC;IACnB;IAEA,IAAK,GAAG,EAAE,QAAQ,EAAE;QAClB,MAAM,MAAM,IAAI,CAAC,IAAI;QACrB,MAAM,YAAY,IAAI,GAAG,CAAC;QAC1B,IAAI,CAAC,WAAW;QAChB,UAAU,MAAM,CAAC;QACjB,IAAI,UAAU,IAAI,KAAK,GAAG,IAAI,MAAM,CAAC;IACvC;IAEA,KAAM,GAAG,EAAE,QAAQ,EAAE;QACnB,MAAM,YAAY,CAAC,GAAG;YACpB,IAAI,CAAC,GAAG,CAAC,KAAK;YACd,YAAY;QACd;QACA,IAAI,CAAC,EAAE,CAAC,KAAK;IACf;IAEA,KAAM,GAAG,EAAE,GAAG,IAAI,EAAE;QAClB,MAAM,MAAM,IAAI,CAAC,IAAI;QACrB,IAAI,CAAC,IAAI,GAAG,CAAC,MAAM;QACnB,KAAK,MAAM,YAAY,IAAI,GAAG,CAAC,KAC7B,IAAI;YACF,YAAY;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;QAChB;IAEJ;AACF;AAEA,KAAK,cAAc,GAAG,CAAC,CAAC;AAExB;;;;CAIC,GACD,KAAK,MAAM,GAAG;IACZ,YAAY;QACV;YACE,MAAM;gBACJ;gBACA;aACD;QACH;KACD;IACD,cAAc;AAChB;AAEA,KAAK,aAAa,GAAG,CAAC;AAEtB,wBAAwB;kBACT;;;AClpCf,QAAQ,cAAc,GAAG,SAAU,CAAC;IAClC,OAAO,KAAK,EAAE,UAAU,GAAG,IAAI;QAAC,SAAS;IAAC;AAC5C;AAEA,QAAQ,iBAAiB,GAAG,SAAU,CAAC;IACrC,OAAO,cAAc,CAAC,GAAG,cAAc;QAAC,OAAO;IAAI;AACrD;AAEA,QAAQ,SAAS,GAAG,SAAU,MAAM,EAAE,IAAI;IACxC,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,SAAU,GAAG;QACvC,IACE,QAAQ,aACR,QAAQ,gBACR,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,MAE3C;QAGF,OAAO,cAAc,CAAC,MAAM,KAAK;YAC/B,YAAY;YACZ,KAAK;gBACH,OAAO,MAAM,CAAC,IAAI;YACpB;QACF;IACF;IAEA,OAAO;AACT;AAEA,QAAQ,MAAM,GAAG,SAAU,IAAI,EAAE,QAAQ,EAAE,GAAG;IAC5C,OAAO,cAAc,CAAC,MAAM,UAAU;QACpC,YAAY;QACZ,KAAK;IACP;AACF;;;;;4CCtBa;6CAYA;6CAeA;AAvCb;AAEA,MAAM,OAAO;AAEb,MAAM,OAAO,CAAA,OAAQ,KAAK,OAAO,YAAY,CAAC,KAAK,CAAC,MAAM,IAAI,WAAW;AAEzE,MAAM,SAAS,CAAA;IACb,MAAM,MAAM,KAAK;IAEjB,OAAO,IAAI,WAAW,IAAI,MAAM,EAAE,GAAG,CAAC,CAAC,GAAG,IAAM,IAAI,UAAU,CAAC,IAAI,MAAM;AAC3E;AAEO,MAAM,SAAS,OAAO,QAAQ,KACnC,OAAO,MAAM,CAAC,SAAS,CACrB,OACA,MAAM,OAAO,MAAM,CAAC,MAAM,CACxB;QAAC,MAAM;IAAS,GAChB,CAAA,GAAA,oBAAW,AAAD,EAAE,CAAC,EAAE,OAAO,CAAC,EAAE,GAAG,CAAC,IAE/B;QAAC,MAAM;IAAI,GACX,OACA;QAAC;QAAW;KAAU;AAGnB,MAAM,UAAU,OAAO,MAAM;IAClC,MAAM,KAAK,OAAO,eAAe,CAAC,IAAI,WAAW;IAEjD,OAAO,KAAK,SAAS,CAAC;QACpB,GAAG,KACD,MAAM,OAAO,MAAM,CAAC,OAAO,CACzB;YAAC,MAAM;YAAM;QAAE,GACf,MAAM,MACN,CAAA,GAAA,oBAAW,AAAD,EAAE;QAGhB,IAAI;eAAI;SAAG;IACb;AACF;AAEO,MAAM,UAAU,OAAO,MAAM;IAClC,MAAM,EAAC,CAAC,EAAE,EAAE,EAAC,GAAG,KAAK,KAAK,CAAC;IAE3B,OAAO,CAAA,GAAA,oBAAW,AAAD,EACf,MAAM,OAAO,MAAM,CAAC,OAAO,CACzB;QAAC,MAAM;QAAM,IAAI,IAAI,WAAW;IAAG,GACnC,MAAM,MACN,OAAO;AAGb","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-d09374408c53c542.js","index.js","node_modules/trystero/src/index.js","node_modules/trystero/src/torrent.js","node_modules/trystero/src/room.js","node_modules/trystero/src/utils.js","node_modules/simple-peer-light/index.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","node_modules/trystero/src/crypto.js"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"d6ea1d42532a7575\";var HMR_USE_SSE = false;module.bundle.HMR_BUNDLE_ID = \"0a8ecb283d214d75\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, HMR_USE_SSE, chrome, browser, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var HMR_USE_SSE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets /*: {|[string]: boolean|} */, assetsToDispose /*: Array<[ParcelRequire, string]> */, assetsToAccept /*: Array<[ParcelRequire, string]> */;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\nfunction getPort() {\n  return HMR_PORT || location.port;\n}\n\n// eslint-disable-next-line no-redeclare\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !['localhost', '127.0.0.1', '0.0.0.0'].includes(hostname) ? 'wss' : 'ws';\n  var ws;\n  if (HMR_USE_SSE) {\n    ws = new EventSource('/__parcel_hmr');\n  } else {\n    try {\n      ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');\n    } catch (err) {\n      if (err.message) {\n        console.error(err.message);\n      }\n      ws = {};\n    }\n  }\n\n  // Web extension context\n  var extCtx = typeof browser === 'undefined' ? typeof chrome === 'undefined' ? null : chrome : browser;\n\n  // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n  var supportsSourceURL = false;\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  }\n\n  // $FlowFixMe\n  ws.onmessage = async function (event /*: {data: string, ...} */) {\n    checkedAssets = {} /*: {|[string]: boolean|} */;\n    assetsToAccept = [];\n    assetsToDispose = [];\n    var data /*: HMRMessage */ = JSON.parse(event.data);\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH);\n\n      // Handle HMR Update\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n      if (handled) {\n        console.clear();\n\n        // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n        await hmrApplyUpdates(assets);\n\n        // Dispose all old assets.\n        let processedAssets = {} /*: {|[string]: boolean|} */;\n        for (let i = 0; i < assetsToDispose.length; i++) {\n          let id = assetsToDispose[i][1];\n          if (!processedAssets[id]) {\n            hmrDispose(assetsToDispose[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n\n        // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n        processedAssets = {};\n        for (let i = 0; i < assetsToAccept.length; i++) {\n          let id = assetsToAccept[i][1];\n          if (!processedAssets[id]) {\n            hmrAccept(assetsToAccept[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n      } else fullReload();\n    }\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error(' [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html);\n        // $FlowFixMe\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n  if (ws instanceof WebSocket) {\n    ws.onerror = function (e) {\n      if (e.message) {\n        console.error(e.message);\n      }\n    };\n    ws.onclose = function () {\n      console.warn('[parcel]  Connection to the HMR server was lost');\n    };\n  }\n}\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel]  Error resolved');\n  }\n}\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n           ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div> ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div> <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\nfunction getParents(bundle, id) /*: Array<[ParcelRequire, string]> */{\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n  var parents = [];\n  var k, d, dep;\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n  return parents;\n}\nfunction updateLink(link) {\n  var href = link.getAttribute('href');\n  if (!href) {\n    return;\n  }\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n  newLink.setAttribute('href',\n  // $FlowFixMe\n  href.split('?')[0] + '?' + Date.now());\n  // $FlowFixMe\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href /*: string */ = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n    cssTimeout = null;\n  }, 50);\n}\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n      return new Promise((resolve, reject) => {\n        var _document$head;\n        script.onload = () => resolve(script);\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 || _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension fix\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3 && typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n            extCtx.runtime.reload();\n            return;\n          }\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n          (_document$head2 = document.head) === null || _document$head2 === void 0 || _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\nfunction hmrApply(bundle /*: ParcelRequire */, asset /*:  HMRAsset */) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      }\n\n      // $FlowFixMe\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    }\n\n    // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n    delete modules[id];\n    delete bundle.cache[id];\n\n    // Now delete the orphans.\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\nfunction hmrAcceptCheck(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  }\n\n  // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n      parents.push(...p);\n    }\n  }\n  return accepted;\n}\nfunction hmrAcceptCheckOne(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n  if (checkedAssets[id]) {\n    return true;\n  }\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToDispose.push([bundle, id]);\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n}\nfunction hmrDispose(bundle /*: ParcelRequire */, id /*: string */) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n  delete bundle.cache[id];\n}\nfunction hmrAccept(bundle /*: ParcelRequire */, id /*: string */) {\n  // Execute the module.\n  bundle(id);\n\n  // Run the accept callbacks in the new version of the module.\n  var cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        assetsToAlsoAccept.forEach(function (a) {\n          hmrDispose(a[0], a[1]);\n        });\n\n        // $FlowFixMe[method-unbinding]\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n}","import { joinRoom } from \"trystero\";\n\nlet room,\n  sendPic,\n  getPic,\n  sendCameraSettings,\n  getCameraSettings,\n  setZoom,\n  getZoom,\n  takePictureEvent,\n  getTakePictureEvent;\n\nconst settings = {\n  roomId: null,\n  isCamera: false,\n};\n\nfunction serialize(data) {\n  return encodeURIComponent(JSON.stringify(data)); // use something better\n}\n\n// helper function to turn a string back into an object\n// note: this is dumb and easy and not a good idea, just an example\nfunction deserialize(string) {\n  console.log(\"s\", string);\n  try {\n    return JSON.parse(decodeURIComponent(string)); // use something better\n  } catch (err) {\n    // lol the URL was shit probably\n    console.error(\"derp!\", err);\n    return undefined;\n  }\n}\n\n// every time the user does something, save the new state to the URL\nfunction save_new_state() {\n  // a temp data object to serialize\n  // serialize the data and save behind the url's #\n  window.location.hash = serialize(settings);\n  // show the current url in a readonly text field\n}\n\n// every time the page loads, see if some state came with it\nasync function load_state() {\n  room ? room.leave() : null;\n  room = null;\n\n  // will hold data if there is any\n  var data;\n  // get the current url hash (behind the #)\n  var url_hash = window.location.hash.substring(1);\n  console.log(\"hash on page load is\", url_hash); // debug in dev\n  // check for and apply state if any is present\n  if (url_hash !== undefined && url_hash !== \"\") {\n    console.log(\"whoa\"); // we found shit\n    // try turning the hash string into data\n    data = deserialize(url_hash);\n    console.log(\"got data:\", data);\n    if (data === undefined) {\n      return; // nope, nothing here\n    }\n    // do we see what we'd expect?\n    if (data.roomId !== undefined) {\n      settings.roomId = data.roomId;\n      roomIdInput.value = settings.roomId;\n      room = joinRoom({ appId: \"lolcat\" }, roomId);\n      [sendPic, getPic] = room.makeAction(\"pic\");\n      [setZoom, getZoom] = room.makeAction(\"zoom\");\n      [takePictureEvent, getTakePictureEvent] = room.makeAction(\"takepic\");\n      [sendCameraSettings, getCameraSettings] = room.makeAction(\"settings\");\n      console.log(room);\n    }\n    if (data.isCamera !== undefined) {\n      settings.isCamera = data.isCamera;\n      isCameraInput.checked = settings.isCamera;\n    }\n    if (settings.isCamera) {\n      navigator.mediaDevices\n        .getUserMedia({\n          audio: false,\n          video: true,\n        })\n        .then((selfStream) => {\n          const [track] = selfStream.getVideoTracks();\n          const capabilities = track.getCapabilities();\n          const settings = track.getSettings();\n          if (!(\"zoom\" in settings)) {\n          } else {\n            sendCameraSettings({\n              min: capabilities.zoom.min,\n              max: capabilities.zoom.max,\n              step: capabilities.zoom.step,\n              value: settings.zoom,\n            });\n            getZoom((data, peerId) => {\n              console.log(\"got zoom level\", data);\n              track.applyConstraints({ advanced: [{ zoom: data.zoomLevel }] });\n            });\n          }\n          imageCapture = new ImageCapture(track);\n\n          getTakePictureEvent(() => {\n            imageCapture\n              .takePhoto()\n              .then((blob) => {\n                sendPic(blob);\n              })\n              .catch(error);\n          });\n\n          room.addStream(selfStream);\n          room.onPeerJoin((peerId) => room.addStream(selfStream, peerId));\n        });\n    } else {\n        getCameraSettings((data, peerId)=>{\n            zoomInput.min = data.min\n            zoomInput.max=data.max\n            zoomInput.step = data.step\n            zoomInput.value = data.value\n        })\n      getPic((data, peerID) => {\n        const fileUrl = window.URL.createObjectURL(new Blob([data]));\n        const anchorElement = document.createElement(\"a\");\n\n        anchorElement.href = fileUrl;\n        anchorElement.download = \"img.jpg\";\n        anchorElement.style.display = \"none\";\n\n        document.body.appendChild(anchorElement);\n\n        anchorElement.click();\n        anchorElement.remove();\n\n        window.URL.revokeObjectURL(fileUrl);\n      });\n      room.onPeerStream((stream, peerId) => {\n        console.log(\"got video from peer:\", peerId);\n\n        video.srcObject = stream;\n        video.addEventListener(\"loadedmetadata\", () => {\n          video.play();\n        });\n      });\n    }\n  }\n  // update the url text field for dummies\n}\n\nconst takePicture = () => {\n  console.log(\"take picture\");\n  takePictureEvent({})\n};\nconst changeZoom = (e) => {\n  var zoomLevel = e.target.value;\n\n  console.log(\"change zoom\", zoomLevel);\n  setZoom({ zoomLevel: zoomLevel });\n};\nvar form = document.getElementById(\"form\");\nvar zoomInput = document.getElementById(\"zoom\");\nvar shootInput = document.getElementById(\"shoot\");\nzoomInput.onchange = changeZoom;\nshootInput.onclick = takePicture;\n\nvar roomIdInput = document.getElementById(\"roomId\");\nvar isCameraInput = document.getElementById(\"isCamera\");\nconst video = document.getElementById(\"camera\");\n\nform.onsubmit = function (event) {\n  event.preventDefault();\n  var formdata = new FormData(form);\n  var data = Object.fromEntries(formdata);\n  settings.roomId = data.roomId;\n  settings.isCamera = data.isCamera ? true : false;\n  console.log(settings, data);\n  save_new_state();\n  location.reload();\n\n  return false;\n};\n\nload_state();\n","export {getRelaySockets, joinRoom, selfId} from './torrent.js'\n","import room from './room.js'\nimport {\n  encodeBytes,\n  entries,\n  events,\n  fromEntries,\n  genId,\n  getRelays,\n  initGuard,\n  initPeer,\n  libName,\n  mkErr,\n  noOp,\n  selfId,\n  sleep,\n  values\n} from './utils.js'\nimport {decrypt, encrypt, genKey} from './crypto.js'\n\nconst occupiedRooms = {}\nconst socketPromises = {}\nconst sockets = {}\nconst socketRetryTimeouts = {}\nconst socketListeners = {}\nconst hashLimit = 20\nconst offerPoolSize = 10\nconst defaultRedundancy = 3\nconst defaultAnnounceSecs = 33\nconst maxAnnounceSecs = 120\nconst trackerRetrySecs = 4\nconst trackerAction = 'announce'\nconst defaultRelayUrls = [\n  'wss://tracker.webtorrent.dev',\n  'wss://tracker.openwebtorrent.com',\n  'wss://tracker.files.fm:7073/announce',\n  'wss://tracker.btorrent.xyz'\n]\n\nexport const joinRoom = initGuard(occupiedRooms, (config, ns) => {\n  if (config.trackerUrls || config.trackerRedundancy) {\n    throw mkErr(\n      'trackerUrls/trackerRedundancy have been replaced by relayUrls/relayRedundancy'\n    )\n  }\n\n  const connectedPeers = {}\n  const key = config.password && genKey(config.password, ns)\n  const relayUrls = getRelays(config, defaultRelayUrls, defaultRedundancy)\n\n  const infoHashP = crypto.subtle\n    .digest('SHA-1', encodeBytes(`${libName}:${config.appId}:${ns}`))\n    .then(buffer =>\n      Array.from(new Uint8Array(buffer))\n        .map(b => b.toString(36))\n        .join('')\n        .slice(0, hashLimit)\n    )\n\n  const makeOffers = howMany =>\n    fromEntries(\n      Array(howMany)\n        .fill()\n        .map(() => {\n          const peer = initPeer(true, false, config.rtcConfig)\n\n          return [\n            genId(hashLimit),\n            {peer, offerP: new Promise(res => peer.once(events.signal, res))}\n          ]\n        })\n    )\n\n  const onSocketMessage = async (socket, e) => {\n    const infoHash = await infoHashP\n    let val\n\n    try {\n      val = JSON.parse(e.data)\n    } catch (e) {\n      console.error(`${libName}: received malformed SDP JSON`)\n      return\n    }\n\n    if (val.info_hash !== infoHash || (val.peer_id && val.peer_id === selfId)) {\n      return\n    }\n\n    const errMsg = val['failure reason']\n\n    if (errMsg) {\n      console.warn(\n        `${libName}: torrent tracker failure from ${socket.url} - ${errMsg}`\n      )\n      return\n    }\n\n    if (\n      val.interval &&\n      val.interval > announceSecs &&\n      val.interval <= maxAnnounceSecs\n    ) {\n      clearInterval(announceInterval)\n      announceSecs = val.interval\n      announceInterval = setInterval(announceAll, announceSecs * 1000)\n    }\n\n    if (val.offer && val.offer_id) {\n      if (connectedPeers[val.peer_id] || handledOffers[val.offer_id]) {\n        return\n      }\n\n      handledOffers[val.offer_id] = true\n\n      const peer = initPeer(false, false, config.rtcConfig)\n\n      peer.once(events.signal, async answer =>\n        socket.send(\n          JSON.stringify({\n            answer: key\n              ? {...answer, sdp: await encrypt(key, answer.sdp)}\n              : answer,\n            action: trackerAction,\n            info_hash: infoHash,\n            peer_id: selfId,\n            to_peer_id: val.peer_id,\n            offer_id: val.offer_id\n          })\n        )\n      )\n      peer.on(events.connect, () => onConnect(peer, val.peer_id))\n      peer.on(events.close, () => onDisconnect(peer, val.peer_id, val.offer_id))\n      peer.signal(\n        key ? {...val.offer, sdp: await decrypt(key, val.offer.sdp)} : val.offer\n      )\n\n      return\n    }\n\n    if (val.answer) {\n      if (connectedPeers[val.peer_id] || handledOffers[val.offer_id]) {\n        return\n      }\n\n      const offer = offerPool[val.offer_id]\n\n      if (offer) {\n        const {peer} = offer\n\n        if (peer.destroyed) {\n          return\n        }\n\n        handledOffers[val.offer_id] = true\n        peer.on(events.connect, () =>\n          onConnect(peer, val.peer_id, val.offer_id)\n        )\n        peer.on(events.close, () =>\n          onDisconnect(peer, val.peer_id, val.offer_id)\n        )\n        peer.signal(\n          key\n            ? {...val.answer, sdp: await decrypt(key, val.answer.sdp)}\n            : val.answer\n        )\n      }\n    }\n  }\n\n  const announce = async (socket, infoHash) =>\n    socket.send(\n      JSON.stringify({\n        action: trackerAction,\n        info_hash: infoHash,\n        numwant: offerPoolSize,\n        peer_id: selfId,\n        offers: await Promise.all(\n          entries(offerPool).map(async ([id, {offerP}]) => {\n            const offer = await offerP\n\n            return {\n              offer_id: id,\n              offer: key\n                ? {...offer, sdp: await encrypt(key, offer.sdp)}\n                : offer\n            }\n          })\n        )\n      })\n    )\n\n  const makeSocket = (url, infoHash, forced) => {\n    if (forced || !socketPromises[url]) {\n      socketListeners[url] = {\n        ...socketListeners[url],\n        [infoHash]: onSocketMessage\n      }\n      socketPromises[url] = new Promise(res => {\n        const socket = new WebSocket(url)\n        sockets[url] = socket\n\n        socket.addEventListener('open', () => {\n          // Reset the retry timeout for this tracker\n          socketRetryTimeouts[url] = trackerRetrySecs * 1000\n          res(socket)\n        })\n\n        socket.addEventListener('message', e =>\n          values(socketListeners[url]).forEach(f => f(socket, e))\n        )\n\n        socket.addEventListener('close', async () => {\n          socketRetryTimeouts[url] =\n            socketRetryTimeouts[url] ?? trackerRetrySecs * 1000\n\n          await sleep(socketRetryTimeouts[url])\n          socketRetryTimeouts[url] *= 2\n\n          makeSocket(url, infoHash, true)\n        })\n      })\n    } else {\n      socketListeners[url][infoHash] = onSocketMessage\n    }\n\n    return socketPromises[url]\n  }\n\n  const announceAll = async () => {\n    const infoHash = await infoHashP\n\n    if (offerPool) {\n      cleanPool()\n    }\n\n    offerPool = makeOffers(offerPoolSize)\n\n    relayUrls.forEach(async url => {\n      const socket = await makeSocket(url, infoHash)\n\n      if (socket.readyState === WebSocket.OPEN) {\n        announce(socket, infoHash)\n      } else if (socket.readyState !== WebSocket.CONNECTING) {\n        announce(await makeSocket(url, infoHash, true), infoHash)\n      }\n    })\n  }\n\n  const cleanPool = () => {\n    entries(offerPool).forEach(([id, {peer}]) => {\n      if (!handledOffers[id] && !connectedPeers[id]) {\n        peer.destroy()\n      }\n    })\n\n    handledOffers = {}\n  }\n\n  const onConnect = (peer, id, offerId) => {\n    onPeerConnect(peer, id)\n    connectedPeers[id] = true\n\n    if (offerId) {\n      connectedPeers[offerId] = true\n    }\n  }\n\n  const onDisconnect = (peer, peerId, offerId) => {\n    delete connectedPeers[peerId]\n    peer.destroy()\n\n    const isInOfferPool = offerId in offerPool\n\n    if (isInOfferPool) {\n      delete offerPool[offerId]\n      offerPool = {...offerPool, ...makeOffers(1)}\n    }\n  }\n\n  let announceSecs = defaultAnnounceSecs\n  let announceInterval = setInterval(announceAll, announceSecs * 1000)\n  let onPeerConnect = noOp\n  let handledOffers = {}\n  let offerPool\n\n  announceAll()\n\n  return room(\n    f => (onPeerConnect = f),\n    async () => {\n      const infoHash = await infoHashP\n\n      relayUrls.forEach(url => delete socketListeners[url][infoHash])\n      delete occupiedRooms[ns]\n      clearInterval(announceInterval)\n      cleanPool()\n    }\n  )\n})\n\nexport const getRelaySockets = () => ({...sockets})\n\nexport {selfId} from './utils.js'\n","import {\n  decodeBytes,\n  encodeBytes,\n  entries,\n  events,\n  fromEntries,\n  keys,\n  libName,\n  mkErr,\n  noOp\n} from './utils.js'\n\nconst TypedArray = Object.getPrototypeOf(Uint8Array)\nconst typeByteLimit = 12\nconst typeIndex = 0\nconst nonceIndex = typeIndex + typeByteLimit\nconst tagIndex = nonceIndex + 1\nconst progressIndex = tagIndex + 1\nconst payloadIndex = progressIndex + 1\nconst chunkSize = 16 * 2 ** 10 - payloadIndex\nconst oneByteMax = 0xff\nconst buffLowEvent = 'bufferedamountlow'\n\nexport default (onPeer, onSelfLeave) => {\n  const peerMap = {}\n  const actions = {}\n  const pendingTransmissions = {}\n  const pendingPongs = {}\n  const pendingStreamMetas = {}\n  const pendingTrackMetas = {}\n\n  const iterate = (targets, f) =>\n    (targets\n      ? Array.isArray(targets)\n        ? targets\n        : [targets]\n      : keys(peerMap)\n    ).flatMap(id => {\n      const peer = peerMap[id]\n\n      if (!peer) {\n        console.warn(`${libName}: no peer with id ${id} found`)\n        return []\n      }\n\n      return f(id, peer)\n    })\n\n  const exitPeer = id => {\n    if (!peerMap[id]) {\n      return\n    }\n\n    delete peerMap[id]\n    delete pendingTransmissions[id]\n    delete pendingPongs[id]\n    onPeerLeave(id)\n  }\n\n  const makeAction = type => {\n    if (actions[type]) {\n      return [\n        actions[type].send,\n        actions[type].setOnComplete,\n        actions[type].setOnProgress\n      ]\n    }\n\n    if (!type) {\n      throw mkErr('action type argument is required')\n    }\n\n    const typeBytes = encodeBytes(type)\n\n    if (typeBytes.byteLength > typeByteLimit) {\n      throw mkErr(\n        `action type string \"${type}\" (${typeBytes.byteLength}b) exceeds ` +\n          `byte limit (${typeByteLimit}). Hint: choose a shorter name.`\n      )\n    }\n\n    const typeBytesPadded = new Uint8Array(typeByteLimit)\n    typeBytesPadded.set(typeBytes)\n\n    let nonce = 0\n\n    actions[type] = {\n      onComplete: noOp,\n      onProgress: noOp,\n\n      setOnComplete: f => (actions[type] = {...actions[type], onComplete: f}),\n\n      setOnProgress: f => (actions[type] = {...actions[type], onProgress: f}),\n\n      send: async (data, targets, meta, onProgress) => {\n        if (meta && typeof meta !== 'object') {\n          throw mkErr('action meta argument must be an object')\n        }\n\n        if (data === undefined) {\n          throw mkErr('action data cannot be undefined')\n        }\n\n        const isJson = typeof data !== 'string'\n        const isBlob = data instanceof Blob\n        const isBinary =\n          isBlob || data instanceof ArrayBuffer || data instanceof TypedArray\n\n        if (meta && !isBinary) {\n          throw mkErr('action meta argument can only be used with binary data')\n        }\n\n        const buffer = isBinary\n          ? new Uint8Array(isBlob ? await data.arrayBuffer() : data)\n          : encodeBytes(isJson ? JSON.stringify(data) : data)\n\n        const metaEncoded = meta ? encodeBytes(JSON.stringify(meta)) : null\n\n        const chunkTotal =\n          Math.ceil(buffer.byteLength / chunkSize) + (meta ? 1 : 0) || 1\n\n        const chunks = Array(chunkTotal)\n          .fill()\n          .map((_, i) => {\n            const isLast = i === chunkTotal - 1\n            const isMeta = meta && i === 0\n            const chunk = new Uint8Array(\n              payloadIndex +\n                (isMeta\n                  ? metaEncoded.byteLength\n                  : isLast\n                    ? buffer.byteLength -\n                      chunkSize * (chunkTotal - (meta ? 2 : 1))\n                    : chunkSize)\n            )\n\n            chunk.set(typeBytesPadded)\n            chunk.set([nonce], nonceIndex)\n            chunk.set(\n              [isLast | (isMeta << 1) | (isBinary << 2) | (isJson << 3)],\n              tagIndex\n            )\n            chunk.set(\n              [Math.round(((i + 1) / chunkTotal) * oneByteMax)],\n              progressIndex\n            )\n            chunk.set(\n              meta\n                ? isMeta\n                  ? metaEncoded\n                  : buffer.subarray((i - 1) * chunkSize, i * chunkSize)\n                : buffer.subarray(i * chunkSize, (i + 1) * chunkSize),\n              payloadIndex\n            )\n\n            return chunk\n          })\n\n        nonce = (nonce + 1) & oneByteMax\n\n        return Promise.all(\n          iterate(targets, async (id, peer) => {\n            const chan = peer._channel\n            let chunkN = 0\n\n            while (chunkN < chunkTotal) {\n              const chunk = chunks[chunkN]\n\n              if (chan.bufferedAmount > chan.bufferedAmountLowThreshold) {\n                await new Promise(res => {\n                  const next = () => {\n                    chan.removeEventListener(buffLowEvent, next)\n                    res()\n                  }\n\n                  chan.addEventListener(buffLowEvent, next)\n                })\n              }\n\n              if (!peerMap[id]) {\n                break\n              }\n\n              peer.send(chunk)\n              chunkN++\n\n              if (onProgress) {\n                onProgress(chunk[progressIndex] / oneByteMax, id, meta)\n              }\n            }\n          })\n        )\n      }\n    }\n\n    return [\n      actions[type].send,\n      actions[type].setOnComplete,\n      actions[type].setOnProgress\n    ]\n  }\n\n  const handleData = (id, data) => {\n    const buffer = new Uint8Array(data)\n    const type = decodeBytes(buffer.subarray(typeIndex, nonceIndex)).replaceAll(\n      '\\x00',\n      ''\n    )\n    const [nonce] = buffer.subarray(nonceIndex, tagIndex)\n    const [tag] = buffer.subarray(tagIndex, progressIndex)\n    const [progress] = buffer.subarray(progressIndex, payloadIndex)\n    const payload = buffer.subarray(payloadIndex)\n    const isLast = !!(tag & 1)\n    const isMeta = !!(tag & (1 << 1))\n    const isBinary = !!(tag & (1 << 2))\n    const isJson = !!(tag & (1 << 3))\n\n    if (!actions[type]) {\n      throw mkErr(`received message with unregistered type (${type})`)\n    }\n\n    if (!pendingTransmissions[id]) {\n      pendingTransmissions[id] = {}\n    }\n\n    if (!pendingTransmissions[id][type]) {\n      pendingTransmissions[id][type] = {}\n    }\n\n    let target = pendingTransmissions[id][type][nonce]\n\n    if (!target) {\n      target = pendingTransmissions[id][type][nonce] = {chunks: []}\n    }\n\n    if (isMeta) {\n      target.meta = JSON.parse(decodeBytes(payload))\n    } else {\n      target.chunks.push(payload)\n    }\n\n    actions[type].onProgress(progress / oneByteMax, id, target.meta)\n\n    if (!isLast) {\n      return\n    }\n\n    const full = new Uint8Array(\n      target.chunks.reduce((a, c) => a + c.byteLength, 0)\n    )\n\n    target.chunks.reduce((a, c) => {\n      full.set(c, a)\n      return a + c.byteLength\n    }, 0)\n\n    if (isBinary) {\n      actions[type].onComplete(full, id, target.meta)\n    } else {\n      const text = decodeBytes(full)\n      actions[type].onComplete(isJson ? JSON.parse(text) : text, id)\n    }\n\n    delete pendingTransmissions[id][type][nonce]\n  }\n\n  const [sendPing, getPing] = makeAction('__91n6__')\n  const [sendPong, getPong] = makeAction('__90n6__')\n  const [sendSignal, getSignal] = makeAction('__516n4L__')\n  const [sendStreamMeta, getStreamMeta] = makeAction('__57r34m__')\n  const [sendTrackMeta, getTrackMeta] = makeAction('__7r4ck__')\n\n  let onPeerJoin = noOp\n  let onPeerLeave = noOp\n  let onPeerStream = noOp\n  let onPeerTrack = noOp\n\n  onPeer((peer, id) => {\n    if (peerMap[id]) {\n      return\n    }\n\n    const onData = handleData.bind(null, id)\n\n    peerMap[id] = peer\n\n    peer.on(events.signal, sdp => sendSignal(sdp, id))\n    peer.on(events.close, () => exitPeer(id))\n    peer.on(events.data, onData)\n\n    peer.on(events.stream, stream => {\n      onPeerStream(stream, id, pendingStreamMetas[id])\n      delete pendingStreamMetas[id]\n    })\n\n    peer.on(events.track, (track, stream) => {\n      onPeerTrack(track, stream, id, pendingTrackMetas[id])\n      delete pendingTrackMetas[id]\n    })\n\n    peer.on(events.error, e => {\n      if (e.code === 'ERR_DATA_CHANNEL') {\n        return\n      }\n      console.error(e)\n    })\n\n    onPeerJoin(id)\n    peer.__drainEarlyData(onData)\n  })\n\n  getPing((_, id) => sendPong('', id))\n\n  getPong((_, id) => {\n    if (pendingPongs[id]) {\n      pendingPongs[id]()\n      delete pendingPongs[id]\n    }\n  })\n\n  getSignal((sdp, id) => {\n    if (peerMap[id]) {\n      peerMap[id].signal(sdp)\n    }\n  })\n\n  getStreamMeta((meta, id) => (pendingStreamMetas[id] = meta))\n\n  getTrackMeta((meta, id) => (pendingTrackMetas[id] = meta))\n\n  return {\n    makeAction,\n\n    ping: async id => {\n      if (!id) {\n        throw mkErr('ping() must be called with target peer ID')\n      }\n\n      const start = Date.now()\n\n      sendPing('', id)\n      await new Promise(res => (pendingPongs[id] = res))\n      return Date.now() - start\n    },\n\n    leave: () => {\n      entries(peerMap).forEach(([id, peer]) => {\n        peer.destroy()\n        delete peerMap[id]\n      })\n      onSelfLeave()\n    },\n\n    getPeers: () =>\n      fromEntries(entries(peerMap).map(([id, peer]) => [id, peer._pc])),\n\n    addStream: (stream, targets, meta) =>\n      iterate(targets, async (id, peer) => {\n        if (meta) {\n          await sendStreamMeta(meta, id)\n        }\n\n        peer.addStream(stream)\n      }),\n\n    removeStream: (stream, targets) =>\n      iterate(targets, (_, peer) => peer.removeStream(stream)),\n\n    addTrack: (track, stream, targets, meta) =>\n      iterate(targets, async (id, peer) => {\n        if (meta) {\n          await sendTrackMeta(meta, id)\n        }\n\n        peer.addTrack(track, stream)\n      }),\n\n    removeTrack: (track, stream, targets) =>\n      iterate(targets, (_, peer) => peer.removeTrack(track, stream)),\n\n    replaceTrack: (oldTrack, newTrack, stream, targets, meta) =>\n      iterate(targets, async (id, peer) => {\n        if (meta) {\n          await sendTrackMeta(meta, id)\n        }\n\n        peer.replaceTrack(oldTrack, newTrack, stream)\n      }),\n\n    onPeerJoin: f => (onPeerJoin = f),\n\n    onPeerLeave: f => (onPeerLeave = f),\n\n    onPeerStream: f => (onPeerStream = f),\n\n    onPeerTrack: f => (onPeerTrack = f)\n  }\n}\n","import Peer from 'simple-peer-light'\n\nconst charSet = '0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz'\n\nexport const initPeer = (initiator, trickle, config) => {\n  const peer = new Peer({initiator, trickle, config})\n  const onData = data => peer.__earlyDataBuffer.push(data)\n\n  peer.on(events.data, onData)\n  peer.__earlyDataBuffer = []\n  peer.__drainEarlyData = f => {\n    peer.off(events.data, onData)\n    peer.__earlyDataBuffer.forEach(f)\n    delete peer.__earlyDataBuffer\n    delete peer.__drainEarlyData\n  }\n\n  return peer\n}\n\nexport const genId = n =>\n  Array(n)\n    .fill()\n    .map(() => charSet[Math.floor(Math.random() * charSet.length)])\n    .join('')\n\nexport const initGuard = (occupiedRooms, f) => (config, ns) => {\n  if (occupiedRooms[ns]) {\n    return occupiedRooms[ns]\n  }\n\n  if (!config) {\n    throw mkErr('requires a config map as the first argument')\n  }\n\n  if (!config.appId && !config.firebaseApp) {\n    throw mkErr('config map is missing appId field')\n  }\n\n  if (!ns) {\n    throw mkErr('namespace argument required')\n  }\n\n  return (occupiedRooms[ns] = f(config, ns))\n}\n\nexport const libName = 'Trystero'\n\nexport const selfId = genId(20)\n\nexport const {keys, values, entries, fromEntries} = Object\n\nexport const noOp = () => {}\n\nexport const mkErr = msg => new Error(`${libName}: ${msg}`)\n\nexport const encodeBytes = txt => new TextEncoder().encode(txt)\n\nexport const decodeBytes = buffer => new TextDecoder().decode(buffer)\n\nexport const toHex = buffer =>\n  buffer.reduce((a, c) => a + c.toString(16).padStart(2, '0'), '')\n\nexport const events = fromEntries(\n  ['close', 'connect', 'data', 'error', 'signal', 'stream', 'track'].map(k => [\n    k,\n    k\n  ])\n)\n\nexport const getRelays = (config, defaults, defaultN) =>\n  (config.relayUrls || defaults).slice(\n    0,\n    config.relayUrls\n      ? config.relayUrls.length\n      : config.relayRedundancy || defaultN\n  )\n\nexport const sleep = ms => new Promise(res => setTimeout(res, ms))\n","/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nconst MAX_BUFFERED_AMOUNT = 64 * 1024\nconst ICECOMPLETE_TIMEOUT = 5 * 1000\nconst CHANNEL_CLOSING_TIMEOUT = 5 * 1000\n\nfunction randombytes (size) {\n  const array = new Uint8Array(size)\n  for (let i = 0; i < size; i++) {\n    array[i] = (Math.random() * 256) | 0\n  }\n  return array\n}\n\nfunction getBrowserRTC () {\n  if (typeof globalThis === 'undefined') return null\n  const wrtc = {\n    RTCPeerConnection:\n      globalThis.RTCPeerConnection ||\n      globalThis.mozRTCPeerConnection ||\n      globalThis.webkitRTCPeerConnection,\n    RTCSessionDescription:\n      globalThis.RTCSessionDescription ||\n      globalThis.mozRTCSessionDescription ||\n      globalThis.webkitRTCSessionDescription,\n    RTCIceCandidate:\n      globalThis.RTCIceCandidate ||\n      globalThis.mozRTCIceCandidate ||\n      globalThis.webkitRTCIceCandidate\n  }\n  if (!wrtc.RTCPeerConnection) return null\n  return wrtc\n}\n\nfunction errCode (err, code) {\n  Object.defineProperty(err, 'code', {\n    value: code,\n    enumerable: true,\n    configurable: true\n  })\n  return err\n}\n\n// HACK: Filter trickle lines when trickle is disabled #354\nfunction filterTrickle (sdp) {\n  return sdp.replace(/a=ice-options:trickle\\s\\n/g, '')\n}\n\nfunction warn (message) {\n  console.warn(message)\n}\n\n/**\n * WebRTC peer connection.\n * @param {Object} opts\n */\nclass Peer {\n  constructor (opts = {}) {\n    this._map = new Map() // for event emitter\n\n    this._id = randombytes(4).toString('hex').slice(0, 7)\n    this._doDebug = opts.debug\n    this._debug('new peer %o', opts)\n\n    this.channelName = opts.initiator\n      ? opts.channelName || randombytes(20).toString('hex')\n      : null\n\n    this.initiator = opts.initiator || false\n    this.channelConfig = opts.channelConfig || Peer.channelConfig\n    this.channelNegotiated = this.channelConfig.negotiated\n    this.config = Object.assign({}, Peer.config, opts.config)\n    this.offerOptions = opts.offerOptions || {}\n    this.answerOptions = opts.answerOptions || {}\n    this.sdpTransform = opts.sdpTransform || (sdp => sdp)\n    this.streams = opts.streams || (opts.stream ? [opts.stream] : []) // support old \"stream\" option\n    this.trickle = opts.trickle !== undefined ? opts.trickle : true\n    this.allowHalfTrickle =\n      opts.allowHalfTrickle !== undefined ? opts.allowHalfTrickle : false\n    this.iceCompleteTimeout = opts.iceCompleteTimeout || ICECOMPLETE_TIMEOUT\n\n    this.destroyed = false\n    this.destroying = false\n    this._connected = false\n\n    this.remoteAddress = undefined\n    this.remoteFamily = undefined\n    this.remotePort = undefined\n    this.localAddress = undefined\n    this.localFamily = undefined\n    this.localPort = undefined\n\n    this._wrtc =\n      opts.wrtc && typeof opts.wrtc === 'object' ? opts.wrtc : getBrowserRTC()\n\n    if (!this._wrtc) {\n      if (typeof window === 'undefined') {\n        throw errCode(\n          new Error(\n            'No WebRTC support: Specify `opts.wrtc` option in this environment'\n          ),\n          'ERR_WEBRTC_SUPPORT'\n        )\n      } else {\n        throw errCode(\n          new Error('No WebRTC support: Not a supported browser'),\n          'ERR_WEBRTC_SUPPORT'\n        )\n      }\n    }\n\n    this._pcReady = false\n    this._channelReady = false\n    this._iceComplete = false // ice candidate trickle done (got null candidate)\n    this._iceCompleteTimer = null // send an offer/answer anyway after some timeout\n    this._channel = null\n    this._pendingCandidates = []\n\n    this._isNegotiating = false // is this peer waiting for negotiation to complete?\n    this._firstNegotiation = true\n    this._batchedNegotiation = false // batch synchronous negotiations\n    this._queuedNegotiation = false // is there a queued negotiation request?\n    this._sendersAwaitingStable = []\n    this._senderMap = new Map()\n    this._closingInterval = null\n\n    this._remoteTracks = []\n    this._remoteStreams = []\n\n    this._chunk = null\n    this._cb = null\n    this._interval = null\n\n    try {\n      this._pc = new this._wrtc.RTCPeerConnection(this.config)\n    } catch (err) {\n      this.destroy(errCode(err, 'ERR_PC_CONSTRUCTOR'))\n      return\n    }\n\n    // We prefer feature detection whenever possible, but sometimes that's not\n    // possible for certain implementations.\n    this._isReactNativeWebrtc = typeof this._pc._peerConnectionId === 'number'\n\n    this._pc.oniceconnectionstatechange = () => {\n      this._onIceStateChange()\n    }\n    this._pc.onicegatheringstatechange = () => {\n      this._onIceStateChange()\n    }\n    this._pc.onconnectionstatechange = () => {\n      this._onConnectionStateChange()\n    }\n    this._pc.onsignalingstatechange = () => {\n      this._onSignalingStateChange()\n    }\n    this._pc.onicecandidate = event => {\n      this._onIceCandidate(event)\n    }\n\n    // HACK: Fix for odd Firefox behavior, see: https://github.com/feross/simple-peer/pull/783\n    if (typeof this._pc.peerIdentity === 'object') {\n      this._pc.peerIdentity.catch(err => {\n        this.destroy(errCode(err, 'ERR_PC_PEER_IDENTITY'))\n      })\n    }\n\n    // Other spec events, unused by this implementation:\n    // - onconnectionstatechange\n    // - onicecandidateerror\n    // - onfingerprintfailure\n    // - onnegotiationneeded\n\n    if (this.initiator || this.channelNegotiated) {\n      this._setupData({\n        channel: this._pc.createDataChannel(\n          this.channelName,\n          this.channelConfig\n        )\n      })\n    } else {\n      this._pc.ondatachannel = event => {\n        this._setupData(event)\n      }\n    }\n\n    if (this.streams) {\n      this.streams.forEach(stream => {\n        this.addStream(stream)\n      })\n    }\n    this._pc.ontrack = event => {\n      this._onTrack(event)\n    }\n\n    this._debug('initial negotiation')\n    this._needsNegotiation()\n  }\n\n  get bufferSize () {\n    return (this._channel && this._channel.bufferedAmount) || 0\n  }\n\n  // HACK: it's possible channel.readyState is \"closing\" before peer.destroy() fires\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=882743\n  get connected () {\n    return this._connected && this._channel.readyState === 'open'\n  }\n\n  address () {\n    return {\n      port: this.localPort,\n      family: this.localFamily,\n      address: this.localAddress\n    }\n  }\n\n  signal (data) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot signal after peer is destroyed'), 'ERR_DESTROYED')\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data)\n      } catch (err) {\n        data = {}\n      }\n    }\n    this._debug('signal()')\n\n    if (data.renegotiate && this.initiator) {\n      this._debug('got request to renegotiate')\n      this._needsNegotiation()\n    }\n    if (data.transceiverRequest && this.initiator) {\n      this._debug('got request for transceiver')\n      this.addTransceiver(\n        data.transceiverRequest.kind,\n        data.transceiverRequest.init\n      )\n    }\n    if (data.candidate) {\n      if (this._pc.remoteDescription && this._pc.remoteDescription.type) {\n        this._addIceCandidate(data.candidate)\n      } else {\n        this._pendingCandidates.push(data.candidate)\n      }\n    }\n    if (data.sdp) {\n      this._pc\n        .setRemoteDescription(new this._wrtc.RTCSessionDescription(data))\n        .then(() => {\n          if (this.destroyed) return\n\n          this._pendingCandidates.forEach(candidate => {\n            this._addIceCandidate(candidate)\n          })\n          this._pendingCandidates = []\n\n          if (this._pc.remoteDescription.type === 'offer') this._createAnswer()\n        })\n        .catch(err => {\n          this.destroy(errCode(err, 'ERR_SET_REMOTE_DESCRIPTION'))\n        })\n    }\n    if (\n      !data.sdp &&\n      !data.candidate &&\n      !data.renegotiate &&\n      !data.transceiverRequest\n    ) {\n      this.destroy(\n        errCode(\n          new Error('signal() called with invalid signal data'),\n          'ERR_SIGNALING'\n        )\n      )\n    }\n  }\n\n  _addIceCandidate (candidate) {\n    const iceCandidateObj = new this._wrtc.RTCIceCandidate(candidate)\n    this._pc.addIceCandidate(iceCandidateObj).catch(err => {\n      if (\n        !iceCandidateObj.address ||\n        iceCandidateObj.address.endsWith('.local')\n      ) {\n        warn('Ignoring unsupported ICE candidate.')\n      } else {\n        this.destroy(errCode(err, 'ERR_ADD_ICE_CANDIDATE'))\n      }\n    })\n  }\n\n  /**\n   * Send text/binary data to the remote peer.\n   * @param {ArrayBufferView|ArrayBuffer|string|Blob} chunk\n   */\n  send (chunk) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot send after peer is destroyed'), 'ERR_DESTROYED')\n    this._channel.send(chunk)\n  }\n\n  /**\n   * Add a Transceiver to the connection.\n   * @param {String} kind\n   * @param {Object} init\n   */\n  addTransceiver (kind, init) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addTransceiver after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addTransceiver()')\n\n    if (this.initiator) {\n      try {\n        this._pc.addTransceiver(kind, init)\n        this._needsNegotiation()\n      } catch (err) {\n        this.destroy(errCode(err, 'ERR_ADD_TRANSCEIVER'))\n      }\n    } else {\n      this.emit('signal', {\n        // request initiator to renegotiate\n        type: 'transceiverRequest',\n        transceiverRequest: { kind, init }\n      })\n    }\n  }\n\n  /**\n   * Add a MediaStream to the connection.\n   * @param {MediaStream} stream\n   */\n  addStream (stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addStream after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addStream()')\n\n    stream.getTracks().forEach(track => {\n      this.addTrack(track, stream)\n    })\n  }\n\n  /**\n   * Add a MediaStreamTrack to the connection.\n   * @param {MediaStreamTrack} track\n   * @param {MediaStream} stream\n   */\n  addTrack (track, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addTrack()')\n\n    const submap = this._senderMap.get(track) || new Map() // nested Maps map [track, stream] to sender\n    let sender = submap.get(stream)\n    if (!sender) {\n      sender = this._pc.addTrack(track, stream)\n      submap.set(stream, sender)\n      this._senderMap.set(track, submap)\n      this._needsNegotiation()\n    } else if (sender.removed) {\n      throw errCode(\n        new Error(\n          'Track has been removed. You should enable/disable tracks that you want to re-add.'\n        ),\n        'ERR_SENDER_REMOVED'\n      )\n    } else {\n      throw errCode(\n        new Error('Track has already been added to that stream.'),\n        'ERR_SENDER_ALREADY_ADDED'\n      )\n    }\n  }\n\n  /**\n   * Replace a MediaStreamTrack by another in the connection.\n   * @param {MediaStreamTrack} oldTrack\n   * @param {MediaStreamTrack} newTrack\n   * @param {MediaStream} stream\n   */\n  replaceTrack (oldTrack, newTrack, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot replaceTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('replaceTrack()')\n\n    const submap = this._senderMap.get(oldTrack)\n    const sender = submap ? submap.get(stream) : null\n    if (!sender) {\n      throw errCode(\n        new Error('Cannot replace track that was never added.'),\n        'ERR_TRACK_NOT_ADDED'\n      )\n    }\n    if (newTrack) this._senderMap.set(newTrack, submap)\n\n    if (sender.replaceTrack != null) {\n      sender.replaceTrack(newTrack)\n    } else {\n      this.destroy(\n        errCode(\n          new Error('replaceTrack is not supported in this browser'),\n          'ERR_UNSUPPORTED_REPLACETRACK'\n        )\n      )\n    }\n  }\n\n  /**\n   * Remove a MediaStreamTrack from the connection.\n   * @param {MediaStreamTrack} track\n   * @param {MediaStream} stream\n   */\n  removeTrack (track, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot removeTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('removeSender()')\n\n    const submap = this._senderMap.get(track)\n    const sender = submap ? submap.get(stream) : null\n    if (!sender) {\n      throw errCode(\n        new Error('Cannot remove track that was never added.'),\n        'ERR_TRACK_NOT_ADDED'\n      )\n    }\n    try {\n      sender.removed = true\n      this._pc.removeTrack(sender)\n    } catch (err) {\n      if (err.name === 'NS_ERROR_UNEXPECTED') {\n        this._sendersAwaitingStable.push(sender) // HACK: Firefox must wait until (signalingState === stable) https://bugzilla.mozilla.org/show_bug.cgi?id=1133874\n      } else {\n        this.destroy(errCode(err, 'ERR_REMOVE_TRACK'))\n      }\n    }\n    this._needsNegotiation()\n  }\n\n  /**\n   * Remove a MediaStream from the connection.\n   * @param {MediaStream} stream\n   */\n  removeStream (stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot removeStream after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('removeSenders()')\n\n    stream.getTracks().forEach(track => {\n      this.removeTrack(track, stream)\n    })\n  }\n\n  _needsNegotiation () {\n    this._debug('_needsNegotiation')\n    if (this._batchedNegotiation) return // batch synchronous renegotiations\n    this._batchedNegotiation = true\n    queueMicrotask(() => {\n      this._batchedNegotiation = false\n      if (this.initiator || !this._firstNegotiation) {\n        this._debug('starting batched negotiation')\n        this.negotiate()\n      } else {\n        this._debug('non-initiator initial negotiation request discarded')\n      }\n      this._firstNegotiation = false\n    })\n  }\n\n  negotiate () {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot negotiate after peer is destroyed'), 'ERR_DESTROYED')\n\n    if (this.initiator) {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true\n        this._debug('already negotiating, queueing')\n      } else {\n        this._debug('start negotiation')\n        setTimeout(() => {\n          // HACK: Chrome crashes if we immediately call createOffer\n          this._createOffer()\n        }, 0)\n      }\n    } else {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true\n        this._debug('already negotiating, queueing')\n      } else {\n        this._debug('requesting negotiation from initiator')\n        this.emit('signal', {\n          // request initiator to renegotiate\n          type: 'renegotiate',\n          renegotiate: true\n        })\n      }\n    }\n    this._isNegotiating = true\n  }\n\n  destroy (err) {\n    if (this.destroyed || this.destroying) return\n    this.destroying = true\n\n    this._debug('destroying (error: %s)', err && (err.message || err))\n\n    queueMicrotask(() => {\n      // allow events concurrent with the call to _destroy() to fire (see #692)\n      this.destroyed = true\n      this.destroying = false\n\n      this._debug('destroy (error: %s)', err && (err.message || err))\n\n      this._connected = false\n      this._pcReady = false\n      this._channelReady = false\n      this._remoteTracks = null\n      this._remoteStreams = null\n      this._senderMap = null\n\n      clearInterval(this._closingInterval)\n      this._closingInterval = null\n\n      clearInterval(this._interval)\n      this._interval = null\n      this._chunk = null\n      this._cb = null\n\n      if (this._channel) {\n        try {\n          this._channel.close()\n        } catch (err) {}\n\n        // allow events concurrent with destruction to be handled\n        this._channel.onmessage = null\n        this._channel.onopen = null\n        this._channel.onclose = null\n        this._channel.onerror = null\n      }\n      if (this._pc) {\n        try {\n          this._pc.close()\n        } catch (err) {}\n\n        // allow events concurrent with destruction to be handled\n        this._pc.oniceconnectionstatechange = null\n        this._pc.onicegatheringstatechange = null\n        this._pc.onsignalingstatechange = null\n        this._pc.onicecandidate = null\n        this._pc.ontrack = null\n        this._pc.ondatachannel = null\n      }\n      this._pc = null\n      this._channel = null\n\n      if (err) this.emit('error', err)\n      this.emit('close')\n    })\n  }\n\n  _setupData (event) {\n    if (!event.channel) {\n      // In some situations `pc.createDataChannel()` returns `undefined` (in wrtc),\n      // which is invalid behavior. Handle it gracefully.\n      // See: https://github.com/feross/simple-peer/issues/163\n      return this.destroy(\n        errCode(\n          new Error('Data channel event is missing `channel` property'),\n          'ERR_DATA_CHANNEL'\n        )\n      )\n    }\n\n    this._channel = event.channel\n    this._channel.binaryType = 'arraybuffer'\n\n    if (typeof this._channel.bufferedAmountLowThreshold === 'number') {\n      this._channel.bufferedAmountLowThreshold = MAX_BUFFERED_AMOUNT\n    }\n\n    this.channelName = this._channel.label\n\n    this._channel.onmessage = event => {\n      this._onChannelMessage(event)\n    }\n    this._channel.onbufferedamountlow = () => {\n      this._onChannelBufferedAmountLow()\n    }\n    this._channel.onopen = () => {\n      this._onChannelOpen()\n    }\n    this._channel.onclose = () => {\n      this._onChannelClose()\n    }\n    this._channel.onerror = err => {\n      this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n    }\n\n    // HACK: Chrome will sometimes get stuck in readyState \"closing\", let's check for this condition\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=882743\n    let isClosing = false\n    this._closingInterval = setInterval(() => {\n      // No \"onclosing\" event\n      if (this._channel && this._channel.readyState === 'closing') {\n        if (isClosing) this._onChannelClose() // closing timed out: equivalent to onclose firing\n        isClosing = true\n      } else {\n        isClosing = false\n      }\n    }, CHANNEL_CLOSING_TIMEOUT)\n  }\n\n  _startIceCompleteTimeout () {\n    if (this.destroyed) return\n    if (this._iceCompleteTimer) return\n    this._debug('started iceComplete timeout')\n    this._iceCompleteTimer = setTimeout(() => {\n      if (!this._iceComplete) {\n        this._iceComplete = true\n        this._debug('iceComplete timeout completed')\n        this.emit('iceTimeout')\n        this.emit('_iceComplete')\n      }\n    }, this.iceCompleteTimeout)\n  }\n\n  _createOffer () {\n    if (this.destroyed) return\n\n    this._pc\n      .createOffer(this.offerOptions)\n      .then(offer => {\n        if (this.destroyed) return\n        if (!this.trickle && !this.allowHalfTrickle) { offer.sdp = filterTrickle(offer.sdp) }\n        offer.sdp = this.sdpTransform(offer.sdp)\n\n        const sendOffer = () => {\n          if (this.destroyed) return\n          const signal = this._pc.localDescription || offer\n          this._debug('signal')\n          this.emit('signal', {\n            type: signal.type,\n            sdp: signal.sdp\n          })\n        }\n\n        const onSuccess = () => {\n          this._debug('createOffer success')\n          if (this.destroyed) return\n          if (this.trickle || this._iceComplete) sendOffer()\n          else this.once('_iceComplete', sendOffer) // wait for candidates\n        }\n\n        const onError = err => {\n          this.destroy(errCode(err, 'ERR_SET_LOCAL_DESCRIPTION'))\n        }\n\n        this._pc.setLocalDescription(offer).then(onSuccess).catch(onError)\n      })\n      .catch(err => {\n        this.destroy(errCode(err, 'ERR_CREATE_OFFER'))\n      })\n  }\n\n  _requestMissingTransceivers () {\n    if (this._pc.getTransceivers) {\n      this._pc.getTransceivers().forEach(transceiver => {\n        if (\n          !transceiver.mid &&\n          transceiver.sender.track &&\n          !transceiver.requested\n        ) {\n          transceiver.requested = true // HACK: Safari returns negotiated transceivers with a null mid\n          this.addTransceiver(transceiver.sender.track.kind)\n        }\n      })\n    }\n  }\n\n  _createAnswer () {\n    if (this.destroyed) return\n\n    this._pc\n      .createAnswer(this.answerOptions)\n      .then(answer => {\n        if (this.destroyed) return\n        if (!this.trickle && !this.allowHalfTrickle) { answer.sdp = filterTrickle(answer.sdp) }\n        answer.sdp = this.sdpTransform(answer.sdp)\n\n        const sendAnswer = () => {\n          if (this.destroyed) return\n          const signal = this._pc.localDescription || answer\n          this._debug('signal')\n          this.emit('signal', {\n            type: signal.type,\n            sdp: signal.sdp\n          })\n          if (!this.initiator) this._requestMissingTransceivers()\n        }\n\n        const onSuccess = () => {\n          if (this.destroyed) return\n          if (this.trickle || this._iceComplete) sendAnswer()\n          else this.once('_iceComplete', sendAnswer)\n        }\n\n        const onError = err => {\n          this.destroy(errCode(err, 'ERR_SET_LOCAL_DESCRIPTION'))\n        }\n\n        this._pc.setLocalDescription(answer).then(onSuccess).catch(onError)\n      })\n      .catch(err => {\n        this.destroy(errCode(err, 'ERR_CREATE_ANSWER'))\n      })\n  }\n\n  _onConnectionStateChange () {\n    if (this.destroyed) return\n    if (this._pc.connectionState === 'failed') {\n      this.destroy(\n        errCode(new Error('Connection failed.'), 'ERR_CONNECTION_FAILURE')\n      )\n    }\n  }\n\n  _onIceStateChange () {\n    if (this.destroyed) return\n    const iceConnectionState = this._pc.iceConnectionState\n    const iceGatheringState = this._pc.iceGatheringState\n\n    this._debug(\n      'iceStateChange (connection: %s) (gathering: %s)',\n      iceConnectionState,\n      iceGatheringState\n    )\n    this.emit('iceStateChange', iceConnectionState, iceGatheringState)\n\n    if (\n      iceConnectionState === 'connected' ||\n      iceConnectionState === 'completed'\n    ) {\n      this._pcReady = true\n      this._maybeReady()\n    }\n    if (iceConnectionState === 'failed') {\n      this.destroy(\n        errCode(\n          new Error('Ice connection failed.'),\n          'ERR_ICE_CONNECTION_FAILURE'\n        )\n      )\n    }\n    if (iceConnectionState === 'closed') {\n      this.destroy(\n        errCode(\n          new Error('Ice connection closed.'),\n          'ERR_ICE_CONNECTION_CLOSED'\n        )\n      )\n    }\n  }\n\n  getStats (cb) {\n    // statreports can come with a value array instead of properties\n    const flattenValues = report => {\n      if (Object.prototype.toString.call(report.values) === '[object Array]') {\n        report.values.forEach(value => {\n          Object.assign(report, value)\n        })\n      }\n      return report\n    }\n\n    // Promise-based getStats() (standard)\n    if (this._pc.getStats.length === 0 || this._isReactNativeWebrtc) {\n      this._pc.getStats().then(\n        res => {\n          const reports = []\n          res.forEach(report => {\n            reports.push(flattenValues(report))\n          })\n          cb(null, reports)\n        },\n        err => cb(err)\n      )\n\n      // Single-parameter callback-based getStats() (non-standard)\n    } else if (this._pc.getStats.length > 0) {\n      this._pc.getStats(\n        res => {\n          // If we destroy connection in `connect` callback this code might happen to run when actual connection is already closed\n          if (this.destroyed) return\n\n          const reports = []\n          res.result().forEach(result => {\n            const report = {}\n            result.names().forEach(name => {\n              report[name] = result.stat(name)\n            })\n            report.id = result.id\n            report.type = result.type\n            report.timestamp = result.timestamp\n            reports.push(flattenValues(report))\n          })\n          cb(null, reports)\n        },\n        err => cb(err)\n      )\n\n      // Unknown browser, skip getStats() since it's anyone's guess which style of\n      // getStats() they implement.\n    } else {\n      cb(null, [])\n    }\n  }\n\n  _maybeReady () {\n    this._debug(\n      'maybeReady pc %s channel %s',\n      this._pcReady,\n      this._channelReady\n    )\n    if (\n      this._connected ||\n      this._connecting ||\n      !this._pcReady ||\n      !this._channelReady\n    ) { return }\n\n    this._connecting = true\n\n    // HACK: We can't rely on order here, for details see https://github.com/js-platform/node-webrtc/issues/339\n    const findCandidatePair = () => {\n      if (this.destroyed) return\n\n      this.getStats((err, items) => {\n        if (this.destroyed) return\n\n        // Treat getStats error as non-fatal. It's not essential.\n        if (err) items = []\n\n        const remoteCandidates = {}\n        const localCandidates = {}\n        const candidatePairs = {}\n        let foundSelectedCandidatePair = false\n\n        items.forEach(item => {\n          // TODO: Once all browsers support the hyphenated stats report types, remove\n          // the non-hypenated ones\n          if (\n            item.type === 'remotecandidate' ||\n            item.type === 'remote-candidate'\n          ) {\n            remoteCandidates[item.id] = item\n          }\n          if (\n            item.type === 'localcandidate' ||\n            item.type === 'local-candidate'\n          ) {\n            localCandidates[item.id] = item\n          }\n          if (item.type === 'candidatepair' || item.type === 'candidate-pair') {\n            candidatePairs[item.id] = item\n          }\n        })\n\n        const setSelectedCandidatePair = selectedCandidatePair => {\n          foundSelectedCandidatePair = true\n\n          let local = localCandidates[selectedCandidatePair.localCandidateId]\n\n          if (local && (local.ip || local.address)) {\n            // Spec\n            this.localAddress = local.ip || local.address\n            this.localPort = Number(local.port)\n          } else if (local && local.ipAddress) {\n            // Firefox\n            this.localAddress = local.ipAddress\n            this.localPort = Number(local.portNumber)\n          } else if (\n            typeof selectedCandidatePair.googLocalAddress === 'string'\n          ) {\n            // TODO: remove this once Chrome 58 is released\n            local = selectedCandidatePair.googLocalAddress.split(':')\n            this.localAddress = local[0]\n            this.localPort = Number(local[1])\n          }\n          if (this.localAddress) {\n            this.localFamily = this.localAddress.includes(':')\n              ? 'IPv6'\n              : 'IPv4'\n          }\n\n          let remote =\n            remoteCandidates[selectedCandidatePair.remoteCandidateId]\n\n          if (remote && (remote.ip || remote.address)) {\n            // Spec\n            this.remoteAddress = remote.ip || remote.address\n            this.remotePort = Number(remote.port)\n          } else if (remote && remote.ipAddress) {\n            // Firefox\n            this.remoteAddress = remote.ipAddress\n            this.remotePort = Number(remote.portNumber)\n          } else if (\n            typeof selectedCandidatePair.googRemoteAddress === 'string'\n          ) {\n            // TODO: remove this once Chrome 58 is released\n            remote = selectedCandidatePair.googRemoteAddress.split(':')\n            this.remoteAddress = remote[0]\n            this.remotePort = Number(remote[1])\n          }\n          if (this.remoteAddress) {\n            this.remoteFamily = this.remoteAddress.includes(':')\n              ? 'IPv6'\n              : 'IPv4'\n          }\n\n          this._debug(\n            'connect local: %s:%s remote: %s:%s',\n            this.localAddress,\n            this.localPort,\n            this.remoteAddress,\n            this.remotePort\n          )\n        }\n\n        items.forEach(item => {\n          // Spec-compliant\n          if (item.type === 'transport' && item.selectedCandidatePairId) {\n            setSelectedCandidatePair(\n              candidatePairs[item.selectedCandidatePairId]\n            )\n          }\n\n          // Old implementations\n          if (\n            (item.type === 'googCandidatePair' &&\n              item.googActiveConnection === 'true') ||\n            ((item.type === 'candidatepair' ||\n              item.type === 'candidate-pair') &&\n              item.selected)\n          ) {\n            setSelectedCandidatePair(item)\n          }\n        })\n\n        // Ignore candidate pair selection in browsers like Safari 11 that do not have any local or remote candidates\n        // But wait until at least 1 candidate pair is available\n        if (\n          !foundSelectedCandidatePair &&\n          (!Object.keys(candidatePairs).length ||\n            Object.keys(localCandidates).length)\n        ) {\n          setTimeout(findCandidatePair, 100)\n          return\n        } else {\n          this._connecting = false\n          this._connected = true\n        }\n\n        if (this._chunk) {\n          try {\n            this.send(this._chunk)\n          } catch (err) {\n            return this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n          }\n          this._chunk = null\n          this._debug('sent chunk from \"write before connect\"')\n\n          const cb = this._cb\n          this._cb = null\n          cb(null)\n        }\n\n        // If `bufferedAmountLowThreshold` and 'onbufferedamountlow' are unsupported,\n        // fallback to using setInterval to implement backpressure.\n        if (typeof this._channel.bufferedAmountLowThreshold !== 'number') {\n          this._interval = setInterval(() => this._onInterval(), 150)\n          if (this._interval.unref) this._interval.unref()\n        }\n\n        this._debug('connect')\n        this.emit('connect')\n      })\n    }\n    findCandidatePair()\n  }\n\n  _onInterval () {\n    if (\n      !this._cb ||\n      !this._channel ||\n      this._channel.bufferedAmount > MAX_BUFFERED_AMOUNT\n    ) {\n      return\n    }\n    this._onChannelBufferedAmountLow()\n  }\n\n  _onSignalingStateChange () {\n    if (this.destroyed) return\n\n    if (this._pc.signalingState === 'stable') {\n      this._isNegotiating = false\n\n      // HACK: Firefox doesn't yet support removing tracks when signalingState !== 'stable'\n      this._debug('flushing sender queue', this._sendersAwaitingStable)\n      this._sendersAwaitingStable.forEach(sender => {\n        this._pc.removeTrack(sender)\n        this._queuedNegotiation = true\n      })\n      this._sendersAwaitingStable = []\n\n      if (this._queuedNegotiation) {\n        this._debug('flushing negotiation queue')\n        this._queuedNegotiation = false\n        this._needsNegotiation() // negotiate again\n      } else {\n        this._debug('negotiated')\n        this.emit('negotiated')\n      }\n    }\n\n    this._debug('signalingStateChange %s', this._pc.signalingState)\n    this.emit('signalingStateChange', this._pc.signalingState)\n  }\n\n  _onIceCandidate (event) {\n    if (this.destroyed) return\n    if (event.candidate && this.trickle) {\n      this.emit('signal', {\n        type: 'candidate',\n        candidate: {\n          candidate: event.candidate.candidate,\n          sdpMLineIndex: event.candidate.sdpMLineIndex,\n          sdpMid: event.candidate.sdpMid\n        }\n      })\n    } else if (!event.candidate && !this._iceComplete) {\n      this._iceComplete = true\n      this.emit('_iceComplete')\n    }\n    // as soon as we've received one valid candidate start timeout\n    if (event.candidate) {\n      this._startIceCompleteTimeout()\n    }\n  }\n\n  _onChannelMessage (event) {\n    if (this.destroyed) return\n    let data = event.data\n    if (data instanceof ArrayBuffer) data = new Uint8Array(data)\n    this.emit('data', data)\n  }\n\n  _onChannelBufferedAmountLow () {\n    if (this.destroyed || !this._cb) return\n    this._debug(\n      'ending backpressure: bufferedAmount %d',\n      this._channel.bufferedAmount\n    )\n    const cb = this._cb\n    this._cb = null\n    cb(null)\n  }\n\n  _onChannelOpen () {\n    if (this._connected || this.destroyed) return\n    this._debug('on channel open')\n    this._channelReady = true\n    this._maybeReady()\n  }\n\n  _onChannelClose () {\n    if (this.destroyed) return\n    this._debug('on channel close')\n    this.destroy()\n  }\n\n  _onTrack (event) {\n    if (this.destroyed) return\n\n    event.streams.forEach(eventStream => {\n      this._debug('on track')\n      this.emit('track', event.track, eventStream)\n\n      this._remoteTracks.push({\n        track: event.track,\n        stream: eventStream\n      })\n\n      if (\n        this._remoteStreams.some(remoteStream => {\n          return remoteStream.id === eventStream.id\n        })\n      ) { return } // Only fire one 'stream' event, even though there may be multiple tracks per stream\n\n      this._remoteStreams.push(eventStream)\n      queueMicrotask(() => {\n        this._debug('on stream')\n        this.emit('stream', eventStream) // ensure all tracks have been added\n      })\n    })\n  }\n\n  _debug (...args) {\n    if (!this._doDebug) return\n    args[0] = '[' + this._id + '] ' + args[0]\n    console.log(...args)\n  }\n\n  // event emitter\n  on (key, listener) {\n    const map = this._map\n    if (!map.has(key)) map.set(key, new Set())\n    map.get(key).add(listener)\n  }\n\n  off (key, listener) {\n    const map = this._map\n    const listeners = map.get(key)\n    if (!listeners) return\n    listeners.delete(listener)\n    if (listeners.size === 0) map.delete(key)\n  }\n\n  once (key, listener) {\n    const listener_ = (...args) => {\n      this.off(key, listener_)\n      listener(...args)\n    }\n    this.on(key, listener_)\n  }\n\n  emit (key, ...args) {\n    const map = this._map\n    if (!map.has(key)) return\n    for (const listener of map.get(key)) {\n      try {\n        listener(...args)\n      } catch (err) {\n        console.error(err)\n      }\n    }\n  }\n}\n\nPeer.WEBRTC_SUPPORT = !!getBrowserRTC()\n\n/**\n * Expose peer and data channel config for overriding all Peer\n * instances. Otherwise, just set opts.config or opts.channelConfig\n * when constructing a Peer.\n */\nPeer.config = {\n  iceServers: [\n    {\n      urls: [\n        'stun:stun.l.google.com:19302',\n        'stun:global.stun.twilio.com:3478'\n      ]\n    }\n  ],\n  sdpSemantics: 'unified-plan'\n}\n\nPeer.channelConfig = {}\n\n// module.exports = Peer\nexport default Peer\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import {decodeBytes, encodeBytes} from './utils.js'\n\nconst algo = 'AES-CBC'\n\nconst pack = buff => btoa(String.fromCharCode.apply(null, new Uint8Array(buff)))\n\nconst unpack = packed => {\n  const str = atob(packed)\n\n  return new Uint8Array(str.length).map((_, i) => str.charCodeAt(i)).buffer\n}\n\nexport const genKey = async (secret, ns) =>\n  crypto.subtle.importKey(\n    'raw',\n    await crypto.subtle.digest(\n      {name: 'SHA-256'},\n      encodeBytes(`${secret}:${ns}`)\n    ),\n    {name: algo},\n    false,\n    ['encrypt', 'decrypt']\n  )\n\nexport const encrypt = async (keyP, plaintext) => {\n  const iv = crypto.getRandomValues(new Uint8Array(16))\n\n  return JSON.stringify({\n    c: pack(\n      await crypto.subtle.encrypt(\n        {name: algo, iv},\n        await keyP,\n        encodeBytes(plaintext)\n      )\n    ),\n    iv: [...iv]\n  })\n}\n\nexport const decrypt = async (keyP, raw) => {\n  const {c, iv} = JSON.parse(raw)\n\n  return decodeBytes(\n    await crypto.subtle.decrypt(\n      {name: algo, iv: new Uint8Array(iv)},\n      await keyP,\n      unpack(c)\n    )\n  )\n}\n"],"names":[],"version":3,"file":"index.3d214d75.js.map","sourceRoot":"/__parcel_source_root/"}